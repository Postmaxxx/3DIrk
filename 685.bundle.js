"use strict";(self.webpackChunk_3dprint=self.webpackChunk_3dprint||[]).push([[685],{7123:(e,t,s)=>{var a=s(5893),i=s(7294),o=s(8840);t.Z=({src:e,alt:t,id:s})=>{const[r,c]=(0,i.useState)(!1),d=(0,i.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[r||(0,a.jsx)(o.Z,{}),(0,a.jsx)("img",{ref:d,src:e,alt:t,onLoad:()=>{c(!0)},style:{display:r?"block":"none"},id:s})]})}},6551:(e,t,s)=>{s.r(t),s.d(t,{default:()=>q});var a=s(5893),i=s(4791),o=s(6113),r=s(7294),c=s(8595),d=s(7820),l=s(9590);var n=[{id:"auto",name:{en:"Auto/moto",ru:"Авто/мото"}},{id:"c2",name:{en:"Toys",ru:"Игрушки"}},{id:"c3",name:{en:"Test",ru:"Тест"}},{id:"c4",name:{en:"Decor",ru:"Декор"}}];const g=e=>({type:l.ED.SET_LOAD_DATA_STATUS_CATEGORIES_LIST,payload:e}),u=e=>({type:l.ED.SET_SELECTED_CATEGORY,payload:e}),m=e=>({type:l.ED.SET_SELECTED_PRODUCT,payload:e}),p=e=>({type:l.ED.SET_DATA_CATEGORIES_LIST,payload:e}),h=()=>async function(e){e(g({status:"loading",message:"Loading categories list"}));try{new Promise(((e,t)=>{setTimeout((()=>{n?e(n):t({mesasage:"CategoriesList not found"})}),200)})).then((t=>{e(p(t)),e(g({status:"success",message:"Categories list loaded"}))})).catch((t=>{e(g({status:"error",message:`ERROR while loading categories list: ${t}`}))}))}catch(t){e(g({status:"error",message:`ERROR while loading categories list: ${t}`}))}},y=e=>({type:l.ED.SET_LOAD_DATA_STATUS_CATEGORY,payload:e}),_=e=>({type:l.ED.SET_DATA_CATEGORY,payload:e}),L=e=>async function(t){t(y({dataLoading:{status:"loading",message:`Loading category id: ${e}`},id:e}));try{const s=await new Promise(((t,s)=>{setTimeout((()=>{const a=d.Z.filter((t=>t.categoryId===e));a?t(a):s(`Category ${e} is empty`)}),200)})),a=n.find((t=>t.id===e))?.name||{en:"Other",ru:"Другое"};t(_({id:e,name:a,products:s,page:0})),t(y({dataLoading:{status:"success",message:`Loaded category id: ${e}`},id:e}))}catch(s){t(y({dataLoading:{status:"error",message:`ERROR while loading category id=${e}: error:${s}`},id:e}))}};var x=s(8840),C=s(7123),S=s(9655),j=s(1043);const E={setCategoriesList:p,setLoadDataStatusCategoriesList:g,setLoadDataStatusCategory:y,setSelectedCategory:u,setSelectedProduct:m,loadCategoriesList:h,loadCategory:L},f={setProduct:j.Gr,setLoadDataStatusProduct:j.KT};var v=(0,o.$j)((e=>({lang:e.base.lang})),(e=>({setState:{catalog:(0,i.DE)(E,e),product:(0,i.DE)(f,e)}})))((({lang:e,products:t,setState:s})=>(0,a.jsx)("div",{className:"gallery__container",children:t.map((t=>(0,a.jsx)(S.OL,{to:t.id,onClick:()=>(e=>{s.product.setLoadDataStatusProduct({status:"success",message:""}),s.product.setProduct(e)})(t),children:(0,a.jsxs)("div",{className:"gallery__item",children:[(0,a.jsx)("div",{className:"img__container",children:(0,a.jsx)(C.Z,{src:t.imgs[0].url,alt:t.imgs[0].name[e]})}),(0,a.jsxs)("div",{className:"descr__container",children:[(0,a.jsx)("span",{className:"name",children:t.name[e]}),(0,a.jsxs)("span",{className:"price",children:["en"===e?"Price":"Цена",": ",t.price[e]]})]})]})},t.id)))})));const T={setCategoriesList:p,setLoadDataStatusCategoriesList:g,setLoadDataStatusCategory:y,setSelectedCategory:u,setSelectedProduct:m,loadCategoriesList:h,loadCategory:L,setPage:e=>({type:l.ED.SET_PAGE,payload:e}),setCategory:_};var D=(0,o.$j)((e=>({lang:e.base.lang,loadingProducts:e.catalog.categories[e.catalog.selectedCategory]?.dataLoading,categoriesList:e.catalog.categoriesList,selectedCategory:e.catalog.selectedCategory,categories:e.catalog.categories,selectedProduct:e.catalog.selectedProduct})),(e=>({setState:{catalog:(0,i.DE)(T,e)}})))((({lang:e,selectedCategory:t,setState:s,loadingProducts:i,categories:o})=>{const d=(0,r.useRef)(),l=(0,r.useRef)(null),[n,g]=(0,r.useState)([[]]),[u,m]=(0,r.useState)(6),p={lazyLoad:!1,updateOnMove:!0,perPage:1,fixedWidth:"100%",perMove:1,pagination:!0,arrows:!0,drag:!1,speed:500,wheel:!1,wheelSleep:300,interval:0,pauseOnHover:!0,breakpoints:{768:{wheel:!1}}};return(0,r.useEffect)((()=>{t&&!o[t]&&s.catalog.loadCategory(t)}),[t]),(0,r.useEffect)((()=>{if("success"!==o[t]?.dataLoading?.status)return;const e=[];for(let s=0;s<o[t].products.length;s+=u)e.push(o[t].products.slice(s,s+u));g(e)}),[o[t]?.dataLoading?.status,t]),(0,r.useEffect)((()=>{if(l.current)return document.body.offsetWidth<993&&m(4),d.current=new c.ZP(l.current,p),d.current.on("pagination:updated",(function(e,t,s){e.list.classList.add("splide__pagination--custom"),e.items.forEach(((t,a)=>{0===a||a===e.items.length-1||a<=s.page+1&&a>=s.page-1?t.button.classList.remove("no-display"):t.button.classList.add("no-display"),a===s.page+2&&s.page+2<e.items.length-1||a===s.page-2&&s.page-2>0?(t.button.textContent=" ... ",t.button.classList.remove("no-display")):t.button.textContent=String(t.page+1)}))})),d.current.on("move",(()=>{s.catalog.setPage(d.current?.index)})),d.current.mount(),d.current?.go(o[t].page),()=>{d.current?.destroy()}}),[n]),(0,a.jsx)("div",{className:"splider_single__container",children:"success"===i?.status?(0,a.jsx)("div",{className:"splide splider_single",ref:l,"aria-label":"",children:(0,a.jsx)("div",{className:"splide__track",children:(0,a.jsx)("ul",{className:"splide__list",children:n.map(((e,t)=>(0,a.jsx)("li",{className:"splide__slide",children:(0,a.jsx)(v,{products:e})},t)))})})}):(0,a.jsx)(x.Z,{})})}));const b={setCategoriesList:p,setLoadDataStatusCategoriesList:g,setLoadDataStatusCategory:y,setSelectedCategory:u,setSelectedProduct:m,loadCategoriesList:h};var R=(0,o.$j)((e=>({lang:e.base.lang,loading:e.catalog.categoriesListLoading,list:e.catalog.categoriesList,selectedCategory:e.catalog.selectedCategory})),(e=>({setState:{catalog:(0,i.DE)(b,e)}})))((({list:e,selectedCategory:t,loading:s,lang:i,setState:o})=>((0,r.useEffect)((()=>{"success"!==s.status?o.catalog.loadCategoriesList():!t&&o.catalog.setSelectedCategory(e[0]?.id)}),[s.status]),(0,a.jsx)("div",{className:"categories-list__container",children:(0,a.jsx)("div",{className:"list",children:"success"===s.status?(0,a.jsx)("ul",{children:e.map(((e,s)=>(0,a.jsx)("li",{className:e.id===t?"selected":"",onClick:()=>{return t=e.id,void o.catalog.setSelectedCategory(t);var t},children:e.name[i]},e.id)))}):(0,a.jsx)(x.Z,{})})})))),A=s.p+"assets/images/catalog_hero.webp";var P=(0,o.$j)((e=>({lang:e.base.lang})))((({lang:e})=>(0,a.jsxs)("div",{className:"catalog-intro",children:[(0,a.jsx)("h1",{children:"en"===e?"Our catalog":"Наш каталог"}),(0,a.jsxs)("div",{className:"descr",children:[(0,a.jsx)("div",{className:"img__container",children:(0,a.jsx)(C.Z,{src:A,alt:"en"===e?"Catalog image":"Фото каталога"})}),(0,a.jsxs)("div",{className:"descr__text",children:[(0,a.jsx)("h2",{children:"en"===e?"Subheader":"Подзаголовок"}),(0,a.jsx)("ul",{children:"en"===e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quo tempore atque et nostrum qui vitae! Dolor necessitatibus ipsum consectetur optio."}),(0,a.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Necessitatibus, eveniet odit veritatis totam exercitationem id perspiciatis dolores, ipsum quos reprehenderit, consectetur facere harum rerum libero tempore incidunt modi! Placeat cumque quidem velit porro amet quam possimus dolorum eaque exercitationem quod!"}),(0,a.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quo tempore atque et nostrum qui vitae! Dolor necessitatibus ipsum consectetur optio."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"ВАП в апва ып аволрп ывар лорвыа олывапрловы рпвыадлопрвы аплвоапр лвдаыпр влаорплв ыоарп лвдаырплваыодрплд ывраплва лоаврплвор влапрыдалопвырапл дрываплдывра"}),(0,a.jsx)("p",{children:"ВАП в апва ып аволрп ывар лорвыа олывапрловы рпвыадлопрвы аплвоапр лвдаыпр влаорплв ыоарп лвдаырплваыодрплд ывраплва лоаврплвор влапрыдалопвырапл дрываплдывра"})]})})]})]})]}))),N=s(3419),O=s(2886);const $={loadColors:N.Uf},w={loadFibers:O.il};var q=(0,o.$j)((e=>({colorsLoading:e.colors.dataLoading,fibersLoading:e.fibers.dataLoading})),(e=>({setState:{colors:(0,i.DE)($,e),fibers:(0,i.DE)(w,e)}})))((({colorsLoading:e,fibersLoading:t,setState:s})=>((0,r.useEffect)((()=>{"idle"===e.status&&s.colors.loadColors(),"idle"===t.status&&s.fibers.loadFibers()}),[]),(0,a.jsx)("div",{className:"page page_catalog",children:(0,a.jsx)("div",{className:"container_page",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)(P,{}),(0,a.jsxs)("div",{className:"splider_catalog__main",children:[(0,a.jsx)(R,{}),(0,a.jsx)(D,{})]})]})})}))))},1043:(e,t,s)=>{s.d(t,{Gr:()=>r,KT:()=>o,LX:()=>c});var a=s(9590),i=s(7820);const o=e=>({type:a.EH.SET_LOAD_DATA_STATUS_PRODUCT,payload:e}),r=e=>({type:a.EH.SET_DATA_PRODUCT,payload:e}),c=e=>async function(t){t(o({status:"loading",message:`Loading product ${e}`}));try{new Promise(((t,s)=>{setTimeout((()=>{const a=i.Z.find((t=>t.id===e));a?t(a):s({mesasage:`product ${e} not found`})}),1e3)})).then((s=>{t(r(s)),t(o({status:"success",message:`Product id=${e} loaded`}))})).catch((s=>{t(o({status:"error",message:`ERROR while loading product id=${e}: ${s}`}))}))}catch(s){t(o({status:"error",message:`ERROR while loading product id=${e}: ${s}`}))}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtILEdBQVdBLEVBQVFqRCxLQUFPQSxJQUN4RGlELEVBRUFsQixFQUFJa0IsR0FHSGpCLEVBQUksQ0FBRUUsU0FBVSxXQUFXbEMsZUFBa0IsR0FDbkQsSUFBSyxJQUNUbUMsTUFBTUMsSUFDTFQsRUFBUzhCLEVBQVdyQixJQUNwQlQsRUFBU3dDLEVBQXlCLENBQUV2QyxPQUFRLFVBQVdDLFFBQVMsY0FBYzdCLGFBQWUsSUFDOUZxQyxPQUFNQyxJQUNMWCxFQUFTd0MsRUFBeUIsQ0FBRXZDLE9BQVEsUUFBU0MsUUFBUyxrQ0FBa0M3QixNQUFPc0MsTUFBUyxHQUV4SCxDQUNBLE1BQU9DLEdBQ0haLEVBQVN3QyxFQUF5QixDQUFFdkMsT0FBUSxRQUFTQyxRQUFTLGtDQUFrQzdCLE1BQU91QyxNQUMzRyxDQUNKLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2pzL0ltZ1dpdGhQcmVsb2FkZXIudHN4Iiwid2VicGFjazovLy8uL3NyYy9yZWR1eC9tb2Nrcy9jYXRlZ29yaWVzTGlzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdXgvYWN0aW9ucy9jYXRhbG9nLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0dhbGxlcnkvR2FsbGVyeS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvU3BsaWRlcnMvU2luZ2xlL1NwbGlkZXJTaW5nbGUudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhdGVnb3JpZXNMaXN0L0NhdGVnb3JpZXNMaXN0LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXRhbG9nSW50cm8vQ2F0YWxvZ0ludHJvLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvQ2F0YWxvZy9DYXRhbG9nLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdXgvYWN0aW9ucy9wcm9kdWN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gXCIuLi8uLi9jb21wb25lbnRzL1ByZWxvYWRlcnMvUHJlbG9hZGVyXCI7XHJcbmNvbnN0IEltZ1dpdGhQcmVsb2FkZXIgPSAoeyBzcmMsIGFsdCwgaWQgfSkgPT4ge1xyXG4gICAgY29uc3QgW2xvYWRlZCwgc2V0TG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICAgIGNvbnN0IGltZyA9IHVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IGhhc0xvYWRlZCA9ICgpID0+IHtcclxuICAgICAgICBzZXRMb2FkZWQodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtsb2FkZWQgfHwgX2pzeChQcmVsb2FkZXIsIHt9KSwgX2pzeChcImltZ1wiLCB7IHJlZjogaW1nLCBzcmM6IHNyYywgYWx0OiBhbHQsIG9uTG9hZDogaGFzTG9hZGVkLCBzdHlsZTogeyBkaXNwbGF5OiBsb2FkZWQgPyBcImJsb2NrXCIgOiBcIm5vbmVcIiB9LCBpZDogaWQgfSldIH0pKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgSW1nV2l0aFByZWxvYWRlcjtcclxuIiwiY29uc3QgbW9ja0NhdGVnb3JpZXNMaXN0ID0gW1xyXG4gICAge1xyXG4gICAgICAgIGlkOiAnYXV0bycsXHJcbiAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICBlbjogJ0F1dG8vbW90bycsXHJcbiAgICAgICAgICAgIHJ1OiAn0JDQstGC0L4v0LzQvtGC0L4nXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6ICdjMicsXHJcbiAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICBlbjogJ1RveXMnLFxyXG4gICAgICAgICAgICBydTogJ9CY0LPRgNGD0YjQutC4J1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGlkOiAnYzMnLFxyXG4gICAgICAgIG5hbWU6IHtcclxuICAgICAgICAgICAgZW46ICdUZXN0JyxcclxuICAgICAgICAgICAgcnU6ICfQotC10YHRgidcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogJ2M0JyxcclxuICAgICAgICBuYW1lOiB7XHJcbiAgICAgICAgICAgIGVuOiAnRGVjb3InLFxyXG4gICAgICAgICAgICBydTogJ9CU0LXQutC+0YAnXHJcbiAgICAgICAgfSxcclxuICAgIH1cclxuXTtcclxuZXhwb3J0IGRlZmF1bHQgbW9ja0NhdGVnb3JpZXNMaXN0O1xyXG4iLCJpbXBvcnQgbW9ja1Byb2R1Y3RzIGZyb20gJy4uL21vY2tzL2NhdGFsb2dGdWxsJztcclxuaW1wb3J0IHsgYWN0aW9uc0xpc3RDYXRhbG9nIH0gZnJvbSAnLi9hY3Rpb25zTGlzdCc7XHJcbmltcG9ydCBtb2NrQ2F0ZWdvcmllc0xpc3QgZnJvbSBcIi4uL21vY2tzL2NhdGVnb3JpZXNMaXN0XCI7XHJcbmV4cG9ydCBjb25zdCBzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3JpZXNMaXN0ID0gKHBheWxvYWQpID0+ICh7XHJcbiAgICB0eXBlOiBhY3Rpb25zTGlzdENhdGFsb2cuU0VUX0xPQURfREFUQV9TVEFUVVNfQ0FURUdPUklFU19MSVNULFxyXG4gICAgcGF5bG9hZFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IHNldFNlbGVjdGVkQ2F0ZWdvcnkgPSAocGF5bG9hZCkgPT4gKHtcclxuICAgIHR5cGU6IGFjdGlvbnNMaXN0Q2F0YWxvZy5TRVRfU0VMRUNURURfQ0FURUdPUlksXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG5leHBvcnQgY29uc3Qgc2V0U2VsZWN0ZWRQcm9kdWN0ID0gKHBheWxvYWQpID0+ICh7XHJcbiAgICB0eXBlOiBhY3Rpb25zTGlzdENhdGFsb2cuU0VUX1NFTEVDVEVEX1BST0RVQ1QsXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG5leHBvcnQgY29uc3Qgc2V0Q2F0ZWdvcmllc0xpc3QgPSAocGF5bG9hZCkgPT4gKHtcclxuICAgIHR5cGU6IGFjdGlvbnNMaXN0Q2F0YWxvZy5TRVRfREFUQV9DQVRFR09SSUVTX0xJU1QsXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgbG9hZENhdGVnb3JpZXNMaXN0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIChkaXNwYXRjaCkge1xyXG4gICAgICAgIGRpc3BhdGNoKHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcmllc0xpc3QoeyBzdGF0dXM6ICdsb2FkaW5nJywgbWVzc2FnZTogYExvYWRpbmcgY2F0ZWdvcmllcyBsaXN0YCB9KSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXRlZ29yaWVzTGlzdCA9IG1vY2tDYXRlZ29yaWVzTGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcmllc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NhdGVnb3JpZXNMaXN0IGxpc3QgbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyhjYXRlZ29yaWVzTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlaih7IG1lc2FzYWdlOiBgQ2F0ZWdvcmllc0xpc3Qgbm90IGZvdW5kYCB9KSk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICB9KS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRDYXRlZ29yaWVzTGlzdChkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3JpZXNMaXN0KHsgc3RhdHVzOiAnc3VjY2VzcycsIG1lc3NhZ2U6IGBDYXRlZ29yaWVzIGxpc3QgbG9hZGVkYCB9KSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3JpZXNMaXN0KHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiBgRVJST1Igd2hpbGUgbG9hZGluZyBjYXRlZ29yaWVzIGxpc3Q6ICR7ZXJyfWAgfSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2goc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yaWVzTGlzdCh7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogYEVSUk9SIHdoaWxlIGxvYWRpbmcgY2F0ZWdvcmllcyBsaXN0OiAke2V9YCB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnkgPSAocGF5bG9hZCkgPT4gKHtcclxuICAgIHR5cGU6IGFjdGlvbnNMaXN0Q2F0YWxvZy5TRVRfTE9BRF9EQVRBX1NUQVRVU19DQVRFR09SWSxcclxuICAgIHBheWxvYWRcclxufSk7XHJcbmV4cG9ydCBjb25zdCBzZXRDYXRlZ29yeSA9IChwYXlsb2FkKSA9PiAoe1xyXG4gICAgdHlwZTogYWN0aW9uc0xpc3RDYXRhbG9nLlNFVF9EQVRBX0NBVEVHT1JZLFxyXG4gICAgcGF5bG9hZFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IGxvYWRDYXRlZ29yeSA9IChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIChkaXNwYXRjaCkge1xyXG4gICAgICAgIGRpc3BhdGNoKHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnkoeyBkYXRhTG9hZGluZzogeyBzdGF0dXM6ICdsb2FkaW5nJywgbWVzc2FnZTogYExvYWRpbmcgY2F0ZWdvcnkgaWQ6ICR7aWR9YCB9LCBpZDogaWQgfSkpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVkUHJvZHVjdHMgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RzID0gbW9ja1Byb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHByb2R1Y3QuY2F0ZWdvcnlJZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMocHJvZHVjdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqKGBDYXRlZ29yeSAke2lkfSBpcyBlbXB0eWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2F0ZWdvcnkgJHtpZH0gbG9hZGVkYCk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9jcmVhdGUgYXJyYXkgb2YgdW5pcXVlIGNvbG9yc1xyXG4gICAgICAgICAgICAvKmNvbnN0IHByb2R1Y3RzV2l0aENvbG9ycyA9IGF3YWl0IHJlY2VpdmVkUHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudENvbG9yczogSUNvbG9yc1tdID0gW11cclxuICAgICAgICAgICAgICAgIHByb2R1Y3QuZmliZXJzLmZvckVhY2goZmliZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGaWJlcnMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGZpYmVyKT8uY29sb3JzLmZvckVhY2goY29sb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRDb2xvcnMuZmluZChleGlzdGVkQ29sb3IgPT4gZXhpc3RlZENvbG9yLnZhbHVlID09PSBjb2xvci52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb2xvcnMucHVzaChjb2xvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5wcm9kdWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yczogY3VycmVudENvbG9yc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSovXHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5TmFtZSA9IG1vY2tDYXRlZ29yaWVzTGlzdC5maW5kKGNhdGVnb3J5ID0+IGNhdGVnb3J5LmlkID09PSBpZCk/Lm5hbWUgfHwgeyBlbjogJ090aGVyJywgcnU6ICfQlNGA0YPQs9C+0LUnIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGNhdGVnb3J5TmFtZSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RzOiByZWNlaXZlZFByb2R1Y3RzLFxyXG4gICAgICAgICAgICAgICAgcGFnZTogMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGlzcGF0Y2goc2V0Q2F0ZWdvcnkoZGF0YSkpO1xyXG4gICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3J5KHsgZGF0YUxvYWRpbmc6IHsgc3RhdHVzOiAnc3VjY2VzcycsIG1lc3NhZ2U6IGBMb2FkZWQgY2F0ZWdvcnkgaWQ6ICR7aWR9YCB9LCBpZDogaWQgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoKHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnkoeyBkYXRhTG9hZGluZzogeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGBFUlJPUiB3aGlsZSBsb2FkaW5nIGNhdGVnb3J5IGlkPSR7aWR9OiBlcnJvcjoke2Vycn1gIH0sIGlkOiBpZCB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuLypcclxuZXhwb3J0IGNvbnN0IGxvYWRDYXRlZ29yeSA9IChpZDogSUNhdGVnb3J5W1wiaWRcIl0pID0+IHtcclxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbihkaXNwYXRjaDogSURpc3BhdGNoKSB7XHJcbiAgICAgICAgZGlzcGF0Y2goc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yeSh7IGRhdGFMb2FkaW5nOiB7c3RhdHVzOiAnbG9hZGluZycsIG1lc3NhZ2U6IGBMb2FkaW5nIGNhdGVnb3J5IGlkOiAke2lkfWB9LCBpZDogaWR9KSlcclxuICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVkUHJvZHVjdHM6IElQcm9kdWN0U2hvcnRbXSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdHM6IElQcm9kdWN0U2hvcnRbXSA9IG1vY2tQcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHByb2R1Y3QgPT4gcHJvZHVjdC5jYXRlZ29yeUlkID09PSBpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChwcm9kdWN0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2R1Y3QuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZzogcHJvZHVjdC5pbWdzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyhwcm9kdWN0cylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWooYENhdGVnb3J5ICR7aWR9IGlzIGVtcHR5YClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGNhdGVnb3J5ICR7aWR9IGxvYWRlZGApO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5TmFtZTogVExhbmdUZXh0ID0gbW9ja0NhdGVnb3JpZXNMaXN0LmZpbmQoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkuaWQgPT09IGlkKT8ubmFtZSB8fCB7ZW46ICdPdGhlcicsIHJ1OiAn0JTRgNGD0LPQvtC1J31cclxuICAgICAgICAgICAgY29uc3QgZGF0YTogT21pdDxJQ2F0ZWdvcnksIFwiZGF0YUxvYWRpbmdcIj4gPSB7XHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGNhdGVnb3J5TmFtZSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RzOiByZWNlaXZlZFByb2R1Y3RzLFxyXG4gICAgICAgICAgICAgICAgcGFnZTogMCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkaXNwYXRjaChzZXRDYXRlZ29yeShkYXRhKSlcclxuICAgICAgICAgICAgZGlzcGF0Y2goc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yeSh7IGRhdGFMb2FkaW5nOiB7c3RhdHVzOiAnc3VjY2VzcycsIG1lc3NhZ2U6IGBMb2FkZWQgY2F0ZWdvcnkgaWQ6ICR7aWR9YH0sIGlkOiBpZH0pKVxyXG5cclxuICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3J5KHsgZGF0YUxvYWRpbmc6IHtzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGBFUlJPUiB3aGlsZSBsb2FkaW5nIGNhdGVnb3J5IGlkPSR7aWR9OiBlcnJvcjoke2Vycn1gfSwgaWQ6IGlkfSkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4qL1xyXG5leHBvcnQgY29uc3Qgc2V0UGFnZSA9IChwYXlsb2FkKSA9PiAoe1xyXG4gICAgdHlwZTogYWN0aW9uc0xpc3RDYXRhbG9nLlNFVF9QQUdFLFxyXG4gICAgcGF5bG9hZFxyXG59KTtcclxuIiwiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0ICcuL2dhbGxlcnkuc2Nzcyc7XHJcbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gXCJyZWR1eFwiO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XHJcbmltcG9ydCBJbWdXaXRoUHJlbG9hZGVyIGZyb20gJy4uLy4uL2Fzc2V0cy9qcy9JbWdXaXRoUHJlbG9hZGVyJztcclxuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBzZXRDYXRlZ29yaWVzTGlzdCwgc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yaWVzTGlzdCwgc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yeSwgc2V0U2VsZWN0ZWRDYXRlZ29yeSwgc2V0U2VsZWN0ZWRQcm9kdWN0LCBsb2FkQ2F0ZWdvcmllc0xpc3QsIGxvYWRDYXRlZ29yeSB9IGZyb20gXCIuLi8uLi9yZWR1eC9hY3Rpb25zL2NhdGFsb2dcIjtcclxuaW1wb3J0IHsgc2V0UHJvZHVjdCwgc2V0TG9hZERhdGFTdGF0dXNQcm9kdWN0IH0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvbnMvcHJvZHVjdFwiO1xyXG5jb25zdCBhY3Rpb25zTGlzdENhdGFsb2cgPSB7IHNldENhdGVnb3JpZXNMaXN0LCBzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3JpZXNMaXN0LCBzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3J5LCBzZXRTZWxlY3RlZENhdGVnb3J5LCBzZXRTZWxlY3RlZFByb2R1Y3QsIGxvYWRDYXRlZ29yaWVzTGlzdCwgbG9hZENhdGVnb3J5IH07XHJcbmNvbnN0IGFjdGlvbnNMaXN0UHJvZHVjdCA9IHsgc2V0UHJvZHVjdCwgc2V0TG9hZERhdGFTdGF0dXNQcm9kdWN0IH07XHJcbmNvbnN0IEdhbGxlcnkgPSAoeyBsYW5nLCBwcm9kdWN0cywgc2V0U3RhdGUgfSkgPT4ge1xyXG4gICAgY29uc3Qgb25DbGlja2VkID0gKHByb2R1Y3QpID0+IHtcclxuICAgICAgICAvL3NldFN0YXRlLmNhdGFsb2cuc2V0U2VsZWN0ZWRQcm9kdWN0KHByb2R1Y3QuaWQpXHJcbiAgICAgICAgc2V0U3RhdGUucHJvZHVjdC5zZXRMb2FkRGF0YVN0YXR1c1Byb2R1Y3QoeyBzdGF0dXM6ICdzdWNjZXNzJywgbWVzc2FnZTogJycgfSk7XHJcbiAgICAgICAgc2V0U3RhdGUucHJvZHVjdC5zZXRQcm9kdWN0KHByb2R1Y3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJnYWxsZXJ5X19jb250YWluZXJcIiwgY2hpbGRyZW46IHByb2R1Y3RzLm1hcCgocHJvZHVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKF9qc3goTmF2TGluaywgeyB0bzogcHJvZHVjdC5pZCwgb25DbGljazogKCkgPT4gb25DbGlja2VkKHByb2R1Y3QpLCBjaGlsZHJlbjogX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6ICdnYWxsZXJ5X19pdGVtJywgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImltZ19fY29udGFpbmVyXCIsIGNoaWxkcmVuOiBfanN4KEltZ1dpdGhQcmVsb2FkZXIsIHsgc3JjOiBwcm9kdWN0LmltZ3NbMF0udXJsLCBhbHQ6IHByb2R1Y3QuaW1nc1swXS5uYW1lW2xhbmddIH0pIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkZXNjcl9fY29udGFpbmVyXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6ICduYW1lJywgY2hpbGRyZW46IHByb2R1Y3QubmFtZVtsYW5nXSB9KSwgX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiAncHJpY2UnLCBjaGlsZHJlbjogW2xhbmcgPT09ICdlbicgPyAnUHJpY2UnIDogJ9Cm0LXQvdCwJywgXCI6IFwiLCBwcm9kdWN0LnByaWNlW2xhbmddXSB9KV0gfSldIH0pIH0sIHByb2R1Y3QuaWQpKTtcclxuICAgICAgICB9KSB9KSk7XHJcbn07XHJcbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZSkgPT4gKHtcclxuICAgIGxhbmc6IHN0YXRlLmJhc2UubGFuZ1xyXG59KTtcclxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gKGRpc3BhdGNoKSA9PiAoe1xyXG4gICAgc2V0U3RhdGU6IHtcclxuICAgICAgICBjYXRhbG9nOiBiaW5kQWN0aW9uQ3JlYXRvcnMoYWN0aW9uc0xpc3RDYXRhbG9nLCBkaXNwYXRjaCksXHJcbiAgICAgICAgcHJvZHVjdDogYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbnNMaXN0UHJvZHVjdCwgZGlzcGF0Y2gpLFxyXG4gICAgfVxyXG59KTtcclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoR2FsbGVyeSk7XHJcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4IH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XHJcbmltcG9ydCAnLi9zcGxpZGVyLXNpbmdsZS5zY3NzJztcclxuaW1wb3J0IHsgYmluZEFjdGlvbkNyZWF0b3JzIH0gZnJvbSBcInJlZHV4XCI7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcclxuaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBTcGxpZGUgZnJvbSBcIkBzcGxpZGVqcy9zcGxpZGVcIjtcclxuaW1wb3J0IHsgc2V0Q2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnksIHNldFNlbGVjdGVkQ2F0ZWdvcnksIHNldFNlbGVjdGVkUHJvZHVjdCwgbG9hZENhdGVnb3JpZXNMaXN0LCBsb2FkQ2F0ZWdvcnksIHNldFBhZ2UsIHNldENhdGVnb3J5IH0gZnJvbSBcIi4uLy4uLy4uL3JlZHV4L2FjdGlvbnMvY2F0YWxvZ1wiO1xyXG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvUHJlbG9hZGVycy9QcmVsb2FkZXInO1xyXG5pbXBvcnQgR2FsbGVyeSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0dhbGxlcnkvR2FsbGVyeSc7XHJcbmNvbnN0IGFjdGlvbnNMaXN0ID0geyBzZXRDYXRlZ29yaWVzTGlzdCwgc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yaWVzTGlzdCwgc2V0TG9hZERhdGFTdGF0dXNDYXRlZ29yeSwgc2V0U2VsZWN0ZWRDYXRlZ29yeSwgc2V0U2VsZWN0ZWRQcm9kdWN0LCBsb2FkQ2F0ZWdvcmllc0xpc3QsIGxvYWRDYXRlZ29yeSwgc2V0UGFnZSwgc2V0Q2F0ZWdvcnkgfTtcclxuY29uc3QgU3BsaWRlclNpbmdsZSA9ICh7IGxhbmcsIHNlbGVjdGVkQ2F0ZWdvcnksIHNldFN0YXRlLCBsb2FkaW5nUHJvZHVjdHMsIGNhdGVnb3JpZXMgfSkgPT4ge1xyXG4gICAgY29uc3Qgc3BsaWRlclNpbmdsZSA9IHVzZVJlZigpO1xyXG4gICAgY29uc3QgX3NwbGlkZU1haW4gPSB1c2VSZWYobnVsbCk7XHJcbiAgICBjb25zdCBbcHJvZHVjdFNsaWRlcywgc2V0UHJvZHVjdFNsaWRlc10gPSB1c2VTdGF0ZShbW11dKTtcclxuICAgIGNvbnN0IFtwcm9kdWN0c1BlclNsaWRlLCBzZXRQcm9kdWN0c1BlclNsaWRlXSA9IHVzZVN0YXRlKDYpO1xyXG4gICAgY29uc3Qgb3B0aW9uc01haW4gPSB7XHJcbiAgICAgICAgbGF6eUxvYWQ6IGZhbHNlLFxyXG4gICAgICAgIHVwZGF0ZU9uTW92ZTogdHJ1ZSxcclxuICAgICAgICBwZXJQYWdlOiAxLFxyXG4gICAgICAgIGZpeGVkV2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgIHBlck1vdmU6IDEsXHJcbiAgICAgICAgcGFnaW5hdGlvbjogdHJ1ZSxcclxuICAgICAgICBhcnJvd3M6IHRydWUsXHJcbiAgICAgICAgZHJhZzogZmFsc2UsXHJcbiAgICAgICAgc3BlZWQ6IDUwMCxcclxuICAgICAgICB3aGVlbDogZmFsc2UsXHJcbiAgICAgICAgd2hlZWxTbGVlcDogMzAwLFxyXG4gICAgICAgIGludGVydmFsOiAwLFxyXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgIHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkQ2F0ZWdvcnkgJiYgIWNhdGVnb3JpZXNbc2VsZWN0ZWRDYXRlZ29yeV0pIHtcclxuICAgICAgICAgICAgc2V0U3RhdGUuY2F0YWxvZy5sb2FkQ2F0ZWdvcnkoc2VsZWN0ZWRDYXRlZ29yeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3NlbGVjdGVkQ2F0ZWdvcnldKTtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhdGVnb3JpZXNbc2VsZWN0ZWRDYXRlZ29yeV0/LmRhdGFMb2FkaW5nPy5zdGF0dXMgIT09ICdzdWNjZXNzJylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2F0ZWdvcmllc1tzZWxlY3RlZENhdGVnb3J5XS5wcm9kdWN0cy5sZW5ndGg7IGkgKz0gcHJvZHVjdHNQZXJTbGlkZSkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChjYXRlZ29yaWVzW3NlbGVjdGVkQ2F0ZWdvcnldLnByb2R1Y3RzLnNsaWNlKGksIGkgKyBwcm9kdWN0c1BlclNsaWRlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFByb2R1Y3RTbGlkZXMocmVzdWx0KTtcclxuICAgIH0sIFtjYXRlZ29yaWVzW3NlbGVjdGVkQ2F0ZWdvcnldPy5kYXRhTG9hZGluZz8uc3RhdHVzLCBzZWxlY3RlZENhdGVnb3J5XSk7XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghX3NwbGlkZU1haW4uY3VycmVudClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIDwgOTkzKSB7XHJcbiAgICAgICAgICAgIHNldFByb2R1Y3RzUGVyU2xpZGUoNCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNwbGlkZXJTaW5nbGUuY3VycmVudCA9IG5ldyBTcGxpZGUoX3NwbGlkZU1haW4uY3VycmVudCwgb3B0aW9uc01haW4pO1xyXG4gICAgICAgIHNwbGlkZXJTaW5nbGUuY3VycmVudC5vbigncGFnaW5hdGlvbjp1cGRhdGVkJywgZnVuY3Rpb24gKGRhdGEsIHByZXYsIHVwZCkge1xyXG4gICAgICAgICAgICBkYXRhLmxpc3QuY2xhc3NMaXN0LmFkZCgnc3BsaWRlX19wYWdpbmF0aW9uLS1jdXN0b20nKTtcclxuICAgICAgICAgICAgZGF0YS5pdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSBkYXRhLml0ZW1zLmxlbmd0aCAtIDEgfHwgKGkgPD0gdXBkLnBhZ2UgKyAxICYmIGkgPj0gdXBkLnBhZ2UgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ25vLWRpc3BsYXknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ25vLWRpc3BsYXknKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgoaSA9PT0gdXBkLnBhZ2UgKyAyICYmIHVwZC5wYWdlICsgMiA8IGRhdGEuaXRlbXMubGVuZ3RoIC0gMSkgfHwgKGkgPT09IHVwZC5wYWdlIC0gMiAmJiB1cGQucGFnZSAtIDIgPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uYnV0dG9uLnRleHRDb250ZW50ID0gJyAuLi4gJztcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCduby1kaXNwbGF5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmJ1dHRvbi50ZXh0Q29udGVudCA9IFN0cmluZyhpdGVtLnBhZ2UgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3BsaWRlclNpbmdsZS5jdXJyZW50Lm9uKFwibW92ZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFN0YXRlLmNhdGFsb2cuc2V0UGFnZShzcGxpZGVyU2luZ2xlLmN1cnJlbnQ/LmluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzcGxpZGVyU2luZ2xlLmN1cnJlbnQubW91bnQoKTtcclxuICAgICAgICBzcGxpZGVyU2luZ2xlLmN1cnJlbnQ/LmdvKGNhdGVnb3JpZXNbc2VsZWN0ZWRDYXRlZ29yeV0ucGFnZSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgc3BsaWRlclNpbmdsZS5jdXJyZW50Py5kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtwcm9kdWN0U2xpZGVzXSk7XHJcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BsaWRlcl9zaW5nbGVfX2NvbnRhaW5lclwiLCBjaGlsZHJlbjogbG9hZGluZ1Byb2R1Y3RzPy5zdGF0dXMgPT09ICdzdWNjZXNzJyA/XHJcbiAgICAgICAgICAgIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BsaWRlIHNwbGlkZXJfc2luZ2xlXCIsIHJlZjogX3NwbGlkZU1haW4sIFwiYXJpYS1sYWJlbFwiOiBcIlwiLCBjaGlsZHJlbjogX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzcGxpZGVfX3RyYWNrXCIsIGNoaWxkcmVuOiBfanN4KFwidWxcIiwgeyBjbGFzc05hbWU6IFwic3BsaWRlX19saXN0XCIsIGNoaWxkcmVuOiBwcm9kdWN0U2xpZGVzLm1hcCgocHJvZHVjdHMsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeChcImxpXCIsIHsgY2xhc3NOYW1lOiBcInNwbGlkZV9fc2xpZGVcIiwgY2hpbGRyZW46IF9qc3goR2FsbGVyeSwgeyBwcm9kdWN0czogcHJvZHVjdHMgfSkgfSwgaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSB9KSB9KSB9KVxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICBfanN4KFByZWxvYWRlciwge30pIH0pKTtcclxufTtcclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gICAgbGFuZzogc3RhdGUuYmFzZS5sYW5nLFxyXG4gICAgbG9hZGluZ1Byb2R1Y3RzOiBzdGF0ZS5jYXRhbG9nLmNhdGVnb3JpZXNbc3RhdGUuY2F0YWxvZy5zZWxlY3RlZENhdGVnb3J5XT8uZGF0YUxvYWRpbmcsXHJcbiAgICBjYXRlZ29yaWVzTGlzdDogc3RhdGUuY2F0YWxvZy5jYXRlZ29yaWVzTGlzdCxcclxuICAgIHNlbGVjdGVkQ2F0ZWdvcnk6IHN0YXRlLmNhdGFsb2cuc2VsZWN0ZWRDYXRlZ29yeSxcclxuICAgIGNhdGVnb3JpZXM6IHN0YXRlLmNhdGFsb2cuY2F0ZWdvcmllcyxcclxuICAgIHNlbGVjdGVkUHJvZHVjdDogc3RhdGUuY2F0YWxvZy5zZWxlY3RlZFByb2R1Y3QsXHJcbn0pO1xyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XHJcbiAgICBzZXRTdGF0ZToge1xyXG4gICAgICAgIGNhdGFsb2c6IGJpbmRBY3Rpb25DcmVhdG9ycyhhY3Rpb25zTGlzdCwgZGlzcGF0Y2gpXHJcbiAgICB9XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShTcGxpZGVyU2luZ2xlKTtcclxuIiwiaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IFwiLi9jYXRlZ29yaWVzLWxpc3Quc2Nzc1wiO1xyXG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tIFwicmVkdXhcIjtcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgc2V0Q2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnksIHNldFNlbGVjdGVkQ2F0ZWdvcnksIHNldFNlbGVjdGVkUHJvZHVjdCwgbG9hZENhdGVnb3JpZXNMaXN0IH0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvbnMvY2F0YWxvZ1wiO1xyXG5pbXBvcnQgUHJlbG9hZGVyIGZyb20gXCIuLi9QcmVsb2FkZXJzL1ByZWxvYWRlclwiO1xyXG5jb25zdCBhY3Rpb25zTGlzdCA9IHsgc2V0Q2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcmllc0xpc3QsIHNldExvYWREYXRhU3RhdHVzQ2F0ZWdvcnksIHNldFNlbGVjdGVkQ2F0ZWdvcnksIHNldFNlbGVjdGVkUHJvZHVjdCwgbG9hZENhdGVnb3JpZXNMaXN0IH07XHJcbmNvbnN0IENhdGFsb2dMaXN0ID0gKHsgbGlzdCwgc2VsZWN0ZWRDYXRlZ29yeSwgbG9hZGluZywgbGFuZywgc2V0U3RhdGUgfSkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0Q2F0ZWdvcnkgPSAoaWQpID0+IHtcclxuICAgICAgICBzZXRTdGF0ZS5jYXRhbG9nLnNldFNlbGVjdGVkQ2F0ZWdvcnkoaWQpO1xyXG4gICAgfTtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGxvYWRpbmcuc3RhdHVzICE9PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgc2V0U3RhdGUuY2F0YWxvZy5sb2FkQ2F0ZWdvcmllc0xpc3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICFzZWxlY3RlZENhdGVnb3J5ICYmIHNldFN0YXRlLmNhdGFsb2cuc2V0U2VsZWN0ZWRDYXRlZ29yeShsaXN0WzBdPy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW2xvYWRpbmcuc3RhdHVzXSk7XHJcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY2F0ZWdvcmllcy1saXN0X19jb250YWluZXJcIiwgY2hpbGRyZW46IF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGlzdFwiLCBjaGlsZHJlbjogbG9hZGluZy5zdGF0dXMgPT09ICdzdWNjZXNzJyA/XHJcbiAgICAgICAgICAgICAgICBfanN4KFwidWxcIiwgeyBjaGlsZHJlbjogbGlzdC5tYXAoKGNhdGVnb3J5LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3goXCJsaVwiLCB7IGNsYXNzTmFtZTogY2F0ZWdvcnkuaWQgPT09IHNlbGVjdGVkQ2F0ZWdvcnkgPyBcInNlbGVjdGVkXCIgOiBcIlwiLCBvbkNsaWNrOiAoKSA9PiBzZWxlY3RDYXRlZ29yeShjYXRlZ29yeS5pZCksIGNoaWxkcmVuOiBjYXRlZ29yeS5uYW1lW2xhbmddIH0sIGNhdGVnb3J5LmlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkgfSlcclxuICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICBfanN4KFByZWxvYWRlciwge30pIH0pIH0pKTtcclxufTtcclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gICAgbGFuZzogc3RhdGUuYmFzZS5sYW5nLFxyXG4gICAgbG9hZGluZzogc3RhdGUuY2F0YWxvZy5jYXRlZ29yaWVzTGlzdExvYWRpbmcsXHJcbiAgICBsaXN0OiBzdGF0ZS5jYXRhbG9nLmNhdGVnb3JpZXNMaXN0LFxyXG4gICAgc2VsZWN0ZWRDYXRlZ29yeTogc3RhdGUuY2F0YWxvZy5zZWxlY3RlZENhdGVnb3J5XHJcbn0pO1xyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XHJcbiAgICBzZXRTdGF0ZToge1xyXG4gICAgICAgIGNhdGFsb2c6IGJpbmRBY3Rpb25DcmVhdG9ycyhhY3Rpb25zTGlzdCwgZGlzcGF0Y2gpXHJcbiAgICB9XHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShDYXRhbG9nTGlzdCk7XHJcbiIsImltcG9ydCB7IGpzeCBhcyBfanN4LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgJy4vY2F0YWxvZy1pbnRyby5zY3NzJztcclxuaW1wb3J0IGNhdGFsb2dQaG90bzEgZnJvbSAnLi4vLi4vYXNzZXRzL2ltZy9jYXRhbG9nL2NhdGFsb2dfaGVyby53ZWJwJztcclxuaW1wb3J0IEltZ1dpdGhQcmVsb2FkZXIgZnJvbSBcIi4uLy4uL2Fzc2V0cy9qcy9JbWdXaXRoUHJlbG9hZGVyXCI7XHJcbmNvbnN0IENhdGFsb2dJbnRybyA9ICh7IGxhbmcgfSkgPT4ge1xyXG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjYXRhbG9nLWludHJvXCIsIGNoaWxkcmVuOiBbX2pzeChcImgxXCIsIHsgY2hpbGRyZW46IGxhbmcgPT09ICdlbicgPyAnT3VyIGNhdGFsb2cnIDogJ9Cd0LDRiCDQutCw0YLQsNC70L7QsycgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRlc2NyXCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJpbWdfX2NvbnRhaW5lclwiLCBjaGlsZHJlbjogX2pzeChJbWdXaXRoUHJlbG9hZGVyLCB7IHNyYzogY2F0YWxvZ1Bob3RvMSwgYWx0OiBsYW5nID09PSAnZW4nID8gJ0NhdGFsb2cgaW1hZ2UnIDogJ9Ck0L7RgtC+INC60LDRgtCw0LvQvtCz0LAnIH0pIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkZXNjcl9fdGV4dFwiLCBjaGlsZHJlbjogW19qc3goXCJoMlwiLCB7IGNoaWxkcmVuOiBsYW5nID09PSAnZW4nID8gJ1N1YmhlYWRlcicgOiAn0J/QvtC00LfQsNCz0L7Qu9C+0LLQvtC6JyB9KSwgX2pzeChcInVsXCIsIHsgY2hpbGRyZW46IGxhbmcgPT09ICdlbicgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBRdW8gdGVtcG9yZSBhdHF1ZSBldCBub3N0cnVtIHF1aSB2aXRhZSEgRG9sb3IgbmVjZXNzaXRhdGlidXMgaXBzdW0gY29uc2VjdGV0dXIgb3B0aW8uXCIgfSksIF9qc3goXCJwXCIsIHsgY2hpbGRyZW46IFwiTG9yZW0gaXBzdW0sIGRvbG9yIHNpdCBhbWV0IGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQuIE5lY2Vzc2l0YXRpYnVzLCBldmVuaWV0IG9kaXQgdmVyaXRhdGlzIHRvdGFtIGV4ZXJjaXRhdGlvbmVtIGlkIHBlcnNwaWNpYXRpcyBkb2xvcmVzLCBpcHN1bSBxdW9zIHJlcHJlaGVuZGVyaXQsIGNvbnNlY3RldHVyIGZhY2VyZSBoYXJ1bSByZXJ1bSBsaWJlcm8gdGVtcG9yZSBpbmNpZHVudCBtb2RpISBQbGFjZWF0IGN1bXF1ZSBxdWlkZW0gdmVsaXQgcG9ycm8gYW1ldCBxdWFtIHBvc3NpbXVzIGRvbG9ydW0gZWFxdWUgZXhlcmNpdGF0aW9uZW0gcXVvZCFcIiB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gUXVvIHRlbXBvcmUgYXRxdWUgZXQgbm9zdHJ1bSBxdWkgdml0YWUhIERvbG9yIG5lY2Vzc2l0YXRpYnVzIGlwc3VtIGNvbnNlY3RldHVyIG9wdGlvLlwiIH0pXSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBcIlxcdTA0MTJcXHUwNDEwXFx1MDQxRiBcXHUwNDMyIFxcdTA0MzBcXHUwNDNGXFx1MDQzMlxcdTA0MzAgXFx1MDQ0QlxcdTA0M0YgXFx1MDQzMFxcdTA0MzJcXHUwNDNFXFx1MDQzQlxcdTA0NDBcXHUwNDNGIFxcdTA0NEJcXHUwNDMyXFx1MDQzMFxcdTA0NDAgXFx1MDQzQlxcdTA0M0VcXHUwNDQwXFx1MDQzMlxcdTA0NEJcXHUwNDMwIFxcdTA0M0VcXHUwNDNCXFx1MDQ0QlxcdTA0MzJcXHUwNDMwXFx1MDQzRlxcdTA0NDBcXHUwNDNCXFx1MDQzRVxcdTA0MzJcXHUwNDRCIFxcdTA0NDBcXHUwNDNGXFx1MDQzMlxcdTA0NEJcXHUwNDMwXFx1MDQzNFxcdTA0M0JcXHUwNDNFXFx1MDQzRlxcdTA0NDBcXHUwNDMyXFx1MDQ0QiBcXHUwNDMwXFx1MDQzRlxcdTA0M0JcXHUwNDMyXFx1MDQzRVxcdTA0MzBcXHUwNDNGXFx1MDQ0MCBcXHUwNDNCXFx1MDQzMlxcdTA0MzRcXHUwNDMwXFx1MDQ0QlxcdTA0M0ZcXHUwNDQwIFxcdTA0MzJcXHUwNDNCXFx1MDQzMFxcdTA0M0VcXHUwNDQwXFx1MDQzRlxcdTA0M0JcXHUwNDMyIFxcdTA0NEJcXHUwNDNFXFx1MDQzMFxcdTA0NDBcXHUwNDNGIFxcdTA0M0JcXHUwNDMyXFx1MDQzNFxcdTA0MzBcXHUwNDRCXFx1MDQ0MFxcdTA0M0ZcXHUwNDNCXFx1MDQzMlxcdTA0MzBcXHUwNDRCXFx1MDQzRVxcdTA0MzRcXHUwNDQwXFx1MDQzRlxcdTA0M0JcXHUwNDM0IFxcdTA0NEJcXHUwNDMyXFx1MDQ0MFxcdTA0MzBcXHUwNDNGXFx1MDQzQlxcdTA0MzJcXHUwNDMwIFxcdTA0M0JcXHUwNDNFXFx1MDQzMFxcdTA0MzJcXHUwNDQwXFx1MDQzRlxcdTA0M0JcXHUwNDMyXFx1MDQzRVxcdTA0NDAgXFx1MDQzMlxcdTA0M0JcXHUwNDMwXFx1MDQzRlxcdTA0NDBcXHUwNDRCXFx1MDQzNFxcdTA0MzBcXHUwNDNCXFx1MDQzRVxcdTA0M0ZcXHUwNDMyXFx1MDQ0QlxcdTA0NDBcXHUwNDMwXFx1MDQzRlxcdTA0M0IgXFx1MDQzNFxcdTA0NDBcXHUwNDRCXFx1MDQzMlxcdTA0MzBcXHUwNDNGXFx1MDQzQlxcdTA0MzRcXHUwNDRCXFx1MDQzMlxcdTA0NDBcXHUwNDMwXCIgfSksIF9qc3goXCJwXCIsIHsgY2hpbGRyZW46IFwiXFx1MDQxMlxcdTA0MTBcXHUwNDFGIFxcdTA0MzIgXFx1MDQzMFxcdTA0M0ZcXHUwNDMyXFx1MDQzMCBcXHUwNDRCXFx1MDQzRiBcXHUwNDMwXFx1MDQzMlxcdTA0M0VcXHUwNDNCXFx1MDQ0MFxcdTA0M0YgXFx1MDQ0QlxcdTA0MzJcXHUwNDMwXFx1MDQ0MCBcXHUwNDNCXFx1MDQzRVxcdTA0NDBcXHUwNDMyXFx1MDQ0QlxcdTA0MzAgXFx1MDQzRVxcdTA0M0JcXHUwNDRCXFx1MDQzMlxcdTA0MzBcXHUwNDNGXFx1MDQ0MFxcdTA0M0JcXHUwNDNFXFx1MDQzMlxcdTA0NEIgXFx1MDQ0MFxcdTA0M0ZcXHUwNDMyXFx1MDQ0QlxcdTA0MzBcXHUwNDM0XFx1MDQzQlxcdTA0M0VcXHUwNDNGXFx1MDQ0MFxcdTA0MzJcXHUwNDRCIFxcdTA0MzBcXHUwNDNGXFx1MDQzQlxcdTA0MzJcXHUwNDNFXFx1MDQzMFxcdTA0M0ZcXHUwNDQwIFxcdTA0M0JcXHUwNDMyXFx1MDQzNFxcdTA0MzBcXHUwNDRCXFx1MDQzRlxcdTA0NDAgXFx1MDQzMlxcdTA0M0JcXHUwNDMwXFx1MDQzRVxcdTA0NDBcXHUwNDNGXFx1MDQzQlxcdTA0MzIgXFx1MDQ0QlxcdTA0M0VcXHUwNDMwXFx1MDQ0MFxcdTA0M0YgXFx1MDQzQlxcdTA0MzJcXHUwNDM0XFx1MDQzMFxcdTA0NEJcXHUwNDQwXFx1MDQzRlxcdTA0M0JcXHUwNDMyXFx1MDQzMFxcdTA0NEJcXHUwNDNFXFx1MDQzNFxcdTA0NDBcXHUwNDNGXFx1MDQzQlxcdTA0MzQgXFx1MDQ0QlxcdTA0MzJcXHUwNDQwXFx1MDQzMFxcdTA0M0ZcXHUwNDNCXFx1MDQzMlxcdTA0MzAgXFx1MDQzQlxcdTA0M0VcXHUwNDMwXFx1MDQzMlxcdTA0NDBcXHUwNDNGXFx1MDQzQlxcdTA0MzJcXHUwNDNFXFx1MDQ0MCBcXHUwNDMyXFx1MDQzQlxcdTA0MzBcXHUwNDNGXFx1MDQ0MFxcdTA0NEJcXHUwNDM0XFx1MDQzMFxcdTA0M0JcXHUwNDNFXFx1MDQzRlxcdTA0MzJcXHUwNDRCXFx1MDQ0MFxcdTA0MzBcXHUwNDNGXFx1MDQzQiBcXHUwNDM0XFx1MDQ0MFxcdTA0NEJcXHUwNDMyXFx1MDQzMFxcdTA0M0ZcXHUwNDNCXFx1MDQzNFxcdTA0NEJcXHUwNDMyXFx1MDQ0MFxcdTA0MzBcIiB9KV0gfSkgfSldIH0pXSB9KV0gfSkpO1xyXG59O1xyXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGUpID0+ICh7XHJcbiAgICBsYW5nOiBzdGF0ZS5iYXNlLmxhbmcsXHJcbn0pO1xyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcykoQ2F0YWxvZ0ludHJvKTtcclxuIiwiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcclxuaW1wb3J0ICcuL2NhdGFsb2cuc2Nzcyc7XHJcbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gXCJyZWR1eFwiO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgU3BsaWRlclNpbmdsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1NwbGlkZXJzL1NpbmdsZS9TcGxpZGVyU2luZ2xlJztcclxuaW1wb3J0IFwiQHNwbGlkZWpzL3JlYWN0LXNwbGlkZS9jc3NcIjtcclxuaW1wb3J0IENhdGVnb3JpZXNMaXN0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ2F0ZWdvcmllc0xpc3QvQ2F0ZWdvcmllc0xpc3QnO1xyXG5pbXBvcnQgQ2F0YWxvZ0ludHJvIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQ2F0YWxvZ0ludHJvL0NhdGFsb2dJbnRybyc7XHJcbmltcG9ydCB7IGxvYWRDb2xvcnMgfSBmcm9tIFwiLi4vLi4vcmVkdXgvYWN0aW9ucy9jb2xvcnNcIjtcclxuaW1wb3J0IHsgbG9hZEZpYmVycyB9IGZyb20gXCIuLi8uLi9yZWR1eC9hY3Rpb25zL2ZpYmVyc1wiO1xyXG5jb25zdCBhY3Rpb25zTGlzdENvbG9ycyA9IHsgbG9hZENvbG9ycyB9O1xyXG5jb25zdCBhY3Rpb25zTGlzdEZpYmVycyA9IHsgbG9hZEZpYmVycyB9O1xyXG5jb25zdCBDYXRhbG9nID0gKHsgY29sb3JzTG9hZGluZywgZmliZXJzTG9hZGluZywgc2V0U3RhdGUgfSkgPT4ge1xyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoY29sb3JzTG9hZGluZy5zdGF0dXMgPT09ICdpZGxlJykge1xyXG4gICAgICAgICAgICBzZXRTdGF0ZS5jb2xvcnMubG9hZENvbG9ycygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmliZXJzTG9hZGluZy5zdGF0dXMgPT09ICdpZGxlJykge1xyXG4gICAgICAgICAgICBzZXRTdGF0ZS5maWJlcnMubG9hZEZpYmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwYWdlIHBhZ2VfY2F0YWxvZ1wiLCBjaGlsZHJlbjogX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb250YWluZXJfcGFnZVwiLCBjaGlsZHJlbjogX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29udGFpbmVyXCIsIGNoaWxkcmVuOiBbX2pzeChDYXRhbG9nSW50cm8sIHt9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BsaWRlcl9jYXRhbG9nX19tYWluXCIsIGNoaWxkcmVuOiBbX2pzeChDYXRlZ29yaWVzTGlzdCwge30pLCBfanN4KFNwbGlkZXJTaW5nbGUsIHt9KV0gfSldIH0pIH0pIH0pKTtcclxufTtcclxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHN0YXRlKSA9PiAoe1xyXG4gICAgY29sb3JzTG9hZGluZzogc3RhdGUuY29sb3JzLmRhdGFMb2FkaW5nLFxyXG4gICAgZmliZXJzTG9hZGluZzogc3RhdGUuZmliZXJzLmRhdGFMb2FkaW5nXHJcbn0pO1xyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XHJcbiAgICBzZXRTdGF0ZToge1xyXG4gICAgICAgIGNvbG9yczogYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbnNMaXN0Q29sb3JzLCBkaXNwYXRjaCksXHJcbiAgICAgICAgZmliZXJzOiBiaW5kQWN0aW9uQ3JlYXRvcnMoYWN0aW9uc0xpc3RGaWJlcnMsIGRpc3BhdGNoKSxcclxuICAgIH1cclxufSk7XHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKENhdGFsb2cpO1xyXG4iLCJpbXBvcnQgeyBhY3Rpb25zTGlzdFByb2R1Y3QgfSBmcm9tICcuL2FjdGlvbnNMaXN0JztcclxuaW1wb3J0IG1vY2tQcm9kdWN0cyBmcm9tIFwiLi4vbW9ja3MvY2F0YWxvZ0Z1bGxcIjtcclxuZXhwb3J0IGNvbnN0IHNldExvYWREYXRhU3RhdHVzUHJvZHVjdCA9IChwYXlsb2FkKSA9PiAoe1xyXG4gICAgdHlwZTogYWN0aW9uc0xpc3RQcm9kdWN0LlNFVF9MT0FEX0RBVEFfU1RBVFVTX1BST0RVQ1QsXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG5leHBvcnQgY29uc3Qgc2V0UHJvZHVjdCA9IChwYXlsb2FkKSA9PiAoe1xyXG4gICAgdHlwZTogYWN0aW9uc0xpc3RQcm9kdWN0LlNFVF9EQVRBX1BST0RVQ1QsXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG4vKlxyXG5leHBvcnQgY29uc3Qgc2V0U2VsZWN0ZWRJbWFnZSA9IDxUIGV4dGVuZHMgSVByb2R1Y3RTdGF0ZVtcInNlbGVjdGVkSW1hZ2VcIl0+KHBheWxvYWQ6IFQpOklBY3Rpb248VD4gPT4gKHtcclxuICAgIHR5cGU6IGFjdGlvbnNMaXN0UHJvZHVjdC5TRVRfU0VMRUNURURfSU1BR0UsXHJcbiAgICBwYXlsb2FkXHJcbn0pO1xyXG4qL1xyXG5leHBvcnQgY29uc3QgbG9hZFByb2R1Y3QgPSAoaWQpID0+IHtcclxuICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAoZGlzcGF0Y2gpIHtcclxuICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c1Byb2R1Y3QoeyBzdGF0dXM6ICdsb2FkaW5nJywgbWVzc2FnZTogYExvYWRpbmcgcHJvZHVjdCAke2lkfWAgfSkpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IG1vY2tQcm9kdWN0cy5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBwcm9kdWN0ICR7aWR9IGxvYWRlZGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMocHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlaih7IG1lc2FzYWdlOiBgcHJvZHVjdCAke2lkfSBub3QgZm91bmRgIH0pKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICB9KS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRQcm9kdWN0KGRhdGEpKTtcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHNldExvYWREYXRhU3RhdHVzUHJvZHVjdCh7IHN0YXR1czogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiBgUHJvZHVjdCBpZD0ke2lkfSBsb2FkZWRgIH0pKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHNldExvYWREYXRhU3RhdHVzUHJvZHVjdCh7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogYEVSUk9SIHdoaWxlIGxvYWRpbmcgcHJvZHVjdCBpZD0ke2lkfTogJHtlcnJ9YCB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkRGF0YVN0YXR1c1Byb2R1Y3QoeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGBFUlJPUiB3aGlsZSBsb2FkaW5nIHByb2R1Y3QgaWQ9JHtpZH06ICR7ZX1gIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG4iXSwibmFtZXMiOlsic3JjIiwiYWx0IiwiaWQiLCJsb2FkZWQiLCJzZXRMb2FkZWQiLCJ1c2VTdGF0ZSIsImltZyIsInVzZVJlZiIsImNoaWxkcmVuIiwicmVmIiwib25Mb2FkIiwic3R5bGUiLCJkaXNwbGF5IiwibmFtZSIsImVuIiwicnUiLCJzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3JpZXNMaXN0IiwicGF5bG9hZCIsInR5cGUiLCJhY3Rpb25zTGlzdCIsIlNFVF9MT0FEX0RBVEFfU1RBVFVTX0NBVEVHT1JJRVNfTElTVCIsInNldFNlbGVjdGVkQ2F0ZWdvcnkiLCJTRVRfU0VMRUNURURfQ0FURUdPUlkiLCJzZXRTZWxlY3RlZFByb2R1Y3QiLCJTRVRfU0VMRUNURURfUFJPRFVDVCIsInNldENhdGVnb3JpZXNMaXN0IiwiU0VUX0RBVEFfQ0FURUdPUklFU19MSVNUIiwibG9hZENhdGVnb3JpZXNMaXN0IiwiYXN5bmMiLCJkaXNwYXRjaCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJQcm9taXNlIiwicmVzIiwicmVqIiwic2V0VGltZW91dCIsIm1lc2FzYWdlIiwidGhlbiIsImRhdGEiLCJjYXRjaCIsImVyciIsImUiLCJzZXRMb2FkRGF0YVN0YXR1c0NhdGVnb3J5IiwiU0VUX0xPQURfREFUQV9TVEFUVVNfQ0FURUdPUlkiLCJzZXRDYXRlZ29yeSIsIlNFVF9EQVRBX0NBVEVHT1JZIiwibG9hZENhdGVnb3J5IiwiZGF0YUxvYWRpbmciLCJyZWNlaXZlZFByb2R1Y3RzIiwicHJvZHVjdHMiLCJmaWx0ZXIiLCJwcm9kdWN0IiwiY2F0ZWdvcnlJZCIsImNhdGVnb3J5TmFtZSIsImZpbmQiLCJjYXRlZ29yeSIsInBhZ2UiLCJhY3Rpb25zTGlzdENhdGFsb2ciLCJhY3Rpb25zTGlzdFByb2R1Y3QiLCJzZXRQcm9kdWN0Iiwic3RhdGUiLCJsYW5nIiwiYmFzZSIsInNldFN0YXRlIiwiY2F0YWxvZyIsImNsYXNzTmFtZSIsIm1hcCIsInRvIiwib25DbGljayIsInNldExvYWREYXRhU3RhdHVzUHJvZHVjdCIsIm9uQ2xpY2tlZCIsIkltZ1dpdGhQcmVsb2FkZXIiLCJpbWdzIiwidXJsIiwicHJpY2UiLCJTRVRfUEFHRSIsImxvYWRpbmdQcm9kdWN0cyIsImNhdGVnb3JpZXMiLCJzZWxlY3RlZENhdGVnb3J5IiwiY2F0ZWdvcmllc0xpc3QiLCJzZWxlY3RlZFByb2R1Y3QiLCJzcGxpZGVyU2luZ2xlIiwiX3NwbGlkZU1haW4iLCJwcm9kdWN0U2xpZGVzIiwic2V0UHJvZHVjdFNsaWRlcyIsInByb2R1Y3RzUGVyU2xpZGUiLCJzZXRQcm9kdWN0c1BlclNsaWRlIiwib3B0aW9uc01haW4iLCJsYXp5TG9hZCIsInVwZGF0ZU9uTW92ZSIsInBlclBhZ2UiLCJmaXhlZFdpZHRoIiwicGVyTW92ZSIsInBhZ2luYXRpb24iLCJhcnJvd3MiLCJkcmFnIiwic3BlZWQiLCJ3aGVlbCIsIndoZWVsU2xlZXAiLCJpbnRlcnZhbCIsInBhdXNlT25Ib3ZlciIsImJyZWFrcG9pbnRzIiwidXNlRWZmZWN0IiwicmVzdWx0IiwiaSIsImxlbmd0aCIsInB1c2giLCJzbGljZSIsImN1cnJlbnQiLCJkb2N1bWVudCIsImJvZHkiLCJvZmZzZXRXaWR0aCIsIm9uIiwicHJldiIsInVwZCIsImxpc3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJpdGVtcyIsImZvckVhY2giLCJpdGVtIiwiYnV0dG9uIiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJTdHJpbmciLCJzZXRQYWdlIiwiaW5kZXgiLCJtb3VudCIsImdvIiwiZGVzdHJveSIsIlByZWxvYWRlciIsImxvYWRpbmciLCJjYXRlZ29yaWVzTGlzdExvYWRpbmciLCJzZWxlY3RDYXRlZ29yeSIsImFjdGlvbnNMaXN0Q29sb3JzIiwibG9hZENvbG9ycyIsImFjdGlvbnNMaXN0RmliZXJzIiwibG9hZEZpYmVycyIsImNvbG9yc0xvYWRpbmciLCJjb2xvcnMiLCJmaWJlcnNMb2FkaW5nIiwiZmliZXJzIiwiQ2F0ZWdvcmllc0xpc3QiLCJTRVRfTE9BRF9EQVRBX1NUQVRVU19QUk9EVUNUIiwiU0VUX0RBVEFfUFJPRFVDVCIsImxvYWRQcm9kdWN0Il0sInNvdXJjZVJvb3QiOiIifQ==