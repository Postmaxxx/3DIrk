(globalThis.webpackChunk_3dprint=globalThis.webpackChunk_3dprint||[]).push([[322],{7123:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(5893),r=t(7294),n=t(8840);const i=({src:e,alt:s,id:t})=>{const[i,l]=(0,r.useState)(!1),c=(0,r.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[i||(0,a.jsx)(n.Z,{}),(0,a.jsx)("img",{ref:c,src:e,alt:s,onLoad:()=>{l(!0)},style:{display:i?"block":"none"},id:t})]})}},1611:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(5893),r=t(7294);const n=({idInstance:e,onChange:s,initialAmount:t,lang:n,reset:i})=>{const[l,c]=(0,r.useState)(t),d=t=>{const a=t>=0?t:0;c(a),s(e,a)};return(0,r.useEffect)((()=>{i&&(c(i.amount),s(e,i.amount))}),[i]),(0,a.jsxs)("div",{className:"amount__changer",children:[(0,a.jsx)("button",{className:l<=1?"disabled":"","aria-label":"Decrease amount",onClick:e=>{e.preventDefault(),l>1&&d(l>2?l-1:1)},children:"–"}),(0,a.jsx)("input",{onBlur:t=>(t=>{const a=t>0?t:1;c(a),s(e,a)})(Number(t.target.value)),type:"text",value:l,onChange:e=>{e.preventDefault(),d(Number(e.target.value))},"aria-label":"en"===n?"Enter amount":"Введите количество"}),(0,a.jsx)("button",{"aria-label":"Increase amount",onClick:e=>{e.preventDefault(),d(l+1)},children:"+"})]})}},4378:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(5893),r=t(7294),n=t(8840);const i=({props:e})=>{const[s,t]=(0,r.useState)(!1),i=(0,r.useRef)(null),l=()=>{t(!0)};return(0,r.useEffect)((()=>{const s=new Image;return s.src=e.path,i.current?.appendChild(s),s.addEventListener("load",l),t(!1),()=>{s.removeEventListener("load",l),i.current?.removeChild(s)}}),[e.path]),(0,a.jsxs)("div",{className:"message_image__container",children:[(0,a.jsx)("div",{className:"img__wrapper",ref:i,children:!s&&(0,a.jsx)(n.Z,{})}),(0,a.jsx)("div",{className:"descr__container",children:(0,a.jsx)("span",{children:e.descr})})]})}},7703:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(5893),r=t(7294);const n=({status:e,header:s,text:t,buttonText:n,buttonAction:i})=>((0,r.useEffect)((()=>{}),[]),(0,a.jsxs)("div",{className:`message_info__container ${e}`,children:[(0,a.jsx)("h3",{children:s}),(0,a.jsx)("div",{className:"text-block",children:t.map(((e,s)=>(0,a.jsx)("p",{children:e},s)))}),(0,a.jsx)("button",{onClick:i,children:n})]}))},4915:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(5893),r=t(3935),n=t(7294);const i=({visible:e,escExit:s,close:t,children:i})=>{const l=document.getElementById("modal"),c=e=>{s&&27===e.keyCode&&t()};return(0,n.useEffect)((()=>(document.addEventListener("keyup",c),()=>{document.removeEventListener("keyup",c)})),[]),l?(0,r.createPortal)((0,a.jsxs)("div",{className:e?"modal-window visible":"modal-window",children:[(0,a.jsx)("button",{className:"closer","aria-label":"close | закрыть",onClick:t,children:(0,a.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",stroke:"#979797",clipRule:"evenodd",d:"M16 31C24.2843 31 31 24.2843 31 16C31 7.71573 24.2843 1 16 1C7.71573 1 1 7.71573 1 16C1 24.2843 7.71573 31 16 31Z",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M9 9L24 24",strokeWidth:"2",strokeLinecap:"square"}),(0,a.jsx)("path",{d:"M8.49512 23.4586L24.5049 9.54144",strokeWidth:"2",strokeLinecap:"square"})]})}),(0,a.jsx)("div",{className:"content",children:e?i:null})]}),l):(0,a.jsx)("div",{className:"modal-window_absence",children:"Node for Modal Windows was not found"})}},7322:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(5893),r=t(7294),n=t(9250),i=t(8840),l=t(4791),c=t(6113),d=t(8595),o=t(7123),u=t(1043),h=t(4915),p=t(4378);const m={loadProduct:u.LX},x=(0,c.$j)((e=>({product:e.product,lang:e.base.lang})),(e=>({setState:{product:(0,l.DE)(m,e)}})))((({lang:e,product:s,setState:t})=>{const n=(0,r.useRef)(null),i=(0,r.useRef)(null),l=(0,r.useRef)(),c=(0,r.useRef)(),[u,m]=(0,r.useState)({visible:!1}),x={lazyLoad:!1,perPage:5,gap:"5%",rewind:!1,pagination:!1,isNavigation:!0,focus:"center",direction:"ltr",wheel:!0,releaseWheel:!0,height:"100%",breakpoints:{1600:{perPage:5},1241:{perPage:5},992:{perPage:4},768:{perPage:3,direction:"ltr",height:"auto",gap:"5%"},480:{perPage:3}}},g={lazyLoad:!0,type:"fade",rewind:!1,pagination:!1,speed:500,wheel:!1,wheelSleep:300,breakpoints:{768:{wheel:!1}}};return(0,r.useEffect)((()=>{if(i.current&&n.current)return c.current=new d.ZP(i.current,x),l.current=new d.ZP(n.current,g),l.current.sync(c.current),l.current.mount(),c.current.mount(),()=>{c.current?.destroy(),l.current?.destroy()}}),[]),(0,a.jsxs)("div",{className:"splider_preview",children:[(0,a.jsx)("div",{id:"modalMain",className:"splide",ref:n,children:(0,a.jsx)("div",{className:"splide__track",children:(0,a.jsx)("ul",{className:"splide__list",children:s.imgs.map(((s,t)=>(0,a.jsx)("li",{className:"splide__slide",onClick:()=>{m({visible:!0})},children:(0,a.jsx)(o.Z,{src:s.url,alt:s.name[e]})},t)))})})}),(0,a.jsx)("div",{id:"modalThumbs",className:"splide",ref:i,children:(0,a.jsx)("div",{className:"splide__track",children:(0,a.jsx)("ul",{className:"splide__list",children:s.imgs.map(((s,t)=>(0,a.jsx)("li",{className:"splide__slide",children:(0,a.jsx)(o.Z,{src:s.url,alt:s.name[e]})},t)))})})}),(0,a.jsx)(h.Z,{visible:u.visible,close:()=>{m({visible:!1})},escExit:!0,children:(0,a.jsx)(p.Z,{props:{path:s.imgs[l.current?.index||0].url,descr:s.imgs[l.current?.index||0].name[e]}})})]})}));var g=t(2886),j=t(3419),v=t(5707),f=t(7703),b=t(1611),_=t(6104);const N={addItem:v.jX,saveCart:v.FP},S=(0,c.$j)((e=>({cart:e.cart,lang:e.base.lang})),(e=>({setState:{cart:(0,l.DE)(N,e)}})))((({product:e,type:s,fiber:t,color:n,lang:i,cart:l,setState:c})=>{const[d,o]=(0,r.useState)(1),[u,p]=(0,r.useState)({visible:!1}),[m,x]=(0,r.useState)({header:"",status:"",text:[]}),[g,j]=(0,r.useState)({amount:1}),v=()=>{p({visible:!1})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"cart-adder",children:[(0,a.jsxs)("span",{children:["en"===i?"Amount":"Количество",": "]}),(0,a.jsx)("div",{className:"amount-changer__container",children:(0,a.jsx)(b.Z,{idInstance:e.id,initialAmount:d,reset:g,lang:i,onChange:(e,s)=>{o(s)}})}),(0,a.jsx)("button",{className:"button_news",title:"Add to cart",onClick:()=>{const a=[];if(!n&&a.push("en"===i?"Please choose the color":"Пожалуйста, выберите цвет"),!t&&a.push("en"===i?"Please choose the fiber":"Пожалуйста, выберите материал"),!s&&a.push("en"===i?"Please choose the type":"Пожалуйста, выберите версию"),!d&&a.push("en"===i?"Please set the amount":"Пожалуйста, укажите количество"),n&&t&&s&&d){const a={product:e,fiber:t,color:n,amount:d,type:s,id:_()};c.cart.addItem(a),c.cart.saveCart([...l.items,a]),j({amount:1});const r=l.items.reduce(((e,s)=>e+s.amount),0)+d;x({status:"success",header:"en"===i?"Added":"Добавлено",text:"en"===i?["This item has been added to your сart.",`You now have ${r} item${r>1?"s":""} in your сart`]:["Этот товар был успешно добавлен в Вашу корзину.",`Сейчас у Вас товаров в корзине: ${r}`]})}else x({status:"error",header:"en"===i?"Error":"Ошибка",text:a});p({visible:!0})},children:"en"===i?"Add to cart":"Добавить в корзину"})]}),(0,a.jsx)(h.Z,{visible:u.visible,close:v,escExit:!0,children:(0,a.jsx)(f.Z,{status:m.status,header:m.header,text:m.text,buttonText:"en"===i?"Close":"Закрыть",buttonAction:v})})]})}));var w=t(9655);const C=({lang:e,colors:s,onSelect:t})=>{const[n,i]=(0,r.useState)(),[l,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)({visible:!1}),[u,m]=(0,r.useState)({descr:"",path:""});return(0,a.jsxs)("div",{className:"color-picker "+(l?"expanded":""),children:[(0,a.jsx)("div",{className:"option current",onClick:()=>{c((e=>!e))},children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"img__container",children:(0,a.jsx)("img",{src:n.url,alt:n.name[e]})}),(0,a.jsx)("span",{children:n.name[e]})]}):(0,a.jsxs)("span",{children:["en"===e?"Choose the fiber before":"Сначала выберите материал"," "]})}),(0,a.jsx)("div",{className:"list",children:s.map((r=>(0,a.jsxs)("div",{className:"option",onClick:()=>{return e=r.id,i(s.find((s=>s.id===e))),c(!1),void t(e);var e},children:[(0,a.jsx)("div",{className:"img__container",children:(0,a.jsx)("img",{src:r.url,alt:r.name[e]})}),(0,a.jsx)("span",{children:r.name[e]}),(0,a.jsx)("span",{onClick:s=>((s,t)=>{s.stopPropagation(),m({descr:t.name[e],path:t.url}),o({visible:!0})})(s,r),children:"en"===e?"(details)":"(детальнее)"})]},r.id)))}),(0,a.jsx)(h.Z,{visible:d.visible,close:()=>{o({visible:!1})},escExit:!0,children:(0,a.jsx)(p.Z,{props:{path:u.path,descr:u.descr}})})]})},L={loadProduct:u.LX},E={loadColors:j.Uf},y={loadFibers:g.il},k=(0,c.$j)((e=>({lang:e.base.lang,selectedCategory:e.catalog.selectedCategory,categories:e.catalog.categories,selectedProduct:e.catalog.selectedProduct,product:e.product,colors:e.colors,fibers:e.fibers})),(e=>({setState:{product:(0,l.DE)(L,e),colors:(0,l.DE)(E,e),fibers:(0,l.DE)(y,e)}})))((({lang:e,setState:s,product:t,colors:n,fibers:i})=>{const[l,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(),[u,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(void 0),x=(0,r.useRef)(null);return(0,r.useEffect)((()=>{"success"===n.dataLoading.status&&"success"===i.dataLoading.status&&"success"===t.dataLoading.status&&c(t.fibers.map((e=>i.fibersList.find((s=>s.id===e)))).filter((e=>void 0!==e?.id)))}),[i.dataLoading.status,n.dataLoading.status,t.dataLoading.status]),(0,a.jsxs)("div",{className:"details__descr",children:[(0,a.jsxs)("h2",{children:["en"===e?"Features":"Характеристики",":"]}),(0,a.jsxs)("div",{className:"features__container",children:[(0,a.jsxs)("div",{className:"feature",children:[(0,a.jsxs)("span",{children:["en"===e?"Description":"Описание",": "]}),t.text[e].map(((e,s)=>(0,a.jsx)("p",{children:e.part},s)))]}),t.features.map(((s,t)=>(0,a.jsxs)("div",{className:"feature",children:[(0,a.jsxs)("span",{children:[s.name[e],": "]}),(0,a.jsx)("span",{children:s.value[e]})]},t))),(0,a.jsxs)("div",{className:"feature",children:[(0,a.jsxs)("span",{children:["en"===e?"Price":"Цена",": "]}),(0,a.jsx)("span",{children:t.price[e]})]}),t.mods.length>0?(0,a.jsxs)("div",{className:"feature wrap_xs",children:[(0,a.jsxs)("label",{htmlFor:"type",children:["en"===e?"Version":"Версия",":"]}),(0,a.jsxs)("select",{id:"type",ref:x,defaultValue:"-1",onChange:e=>{m(t.mods[Number(e.target.value)])},children:[(0,a.jsx)("option",{value:"-1",disabled:!0,hidden:!0,children:"en"===e?"Select type":"Выберите тип"},-1),t.mods.map(((s,t)=>(0,a.jsx)("option",{value:t,children:s[e]},t)))]})]}):null,(0,a.jsxs)("div",{className:"feature wrap_xs",children:[(0,a.jsx)("label",{htmlFor:"fiber",children:d?(0,a.jsxs)(w.OL,{to:`../../fibers/${d.id}`,"aria-label":"en"===e?"(About selected fiber)":" (О выбранном материале)",children:["en"===e?"Fiber":"Материал",":"]}):(0,a.jsxs)(a.Fragment,{children:["en"===e?"Fiber":"Материал",":"]})}),(0,a.jsxs)("select",{id:"fiber",onChange:e=>{o(i.fibersList.find((s=>s.id===e.target.value))),h("")},defaultValue:"",children:[(0,a.jsx)("option",{disabled:!0,hidden:!0,value:"",children:"en"===e?"Select fiber":"Выберите материал"},-1),l.map(((s,t)=>(0,a.jsx)("option",{value:s.id,children:s.short.name[e]},t)))]})]}),(0,a.jsxs)("div",{className:"colors__container wrap_xs",children:[(0,a.jsxs)("span",{children:["en"===e?"Available colors":"Доступные цвета",": "]}),(0,a.jsx)("div",{className:"colors__wrapper",children:(0,a.jsx)(C,{lang:e,colors:n.colors.filter((e=>d?.colors.includes(e.id))),onSelect:e=>{h(e)}})})]})]}),(0,a.jsx)(S,{product:t,type:t.mods.length>0?p:{en:"-",ru:"-"},fiber:d?.id,color:u})]})})),P={loadProduct:u.LX},Z={loadColors:j.Uf},D={loadFibers:g.il},R=(0,c.$j)((e=>({lang:e.base.lang,selectedCategory:e.catalog.selectedCategory,categories:e.catalog.categories,product:e.product,colors:e.colors,fibers:e.fibers})),(e=>({setState:{product:(0,l.DE)(P,e),colors:(0,l.DE)(Z,e),fibers:(0,l.DE)(D,e)}})))((({lang:e,setState:s,product:t,colors:l,fibers:c})=>{const d=(0,n.UO)().productId||"",[o,u]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{d!==t.id&&(s.product.loadProduct(d),u(!1))}),[]),(0,r.useEffect)((()=>{"idle"===c.dataLoading.status&&(s.fibers.loadFibers(),u(!1))}),[c.dataLoading.status]),(0,r.useEffect)((()=>{"idle"===l.dataLoading.status&&(s.colors.loadColors(),u(!1))}),[l.dataLoading.status]),(0,r.useEffect)((()=>{"success"===l.dataLoading.status&&"success"===c.dataLoading.status&&"success"===t.dataLoading.status&&u(!0)}),[c.dataLoading.status,l.dataLoading.status,t.dataLoading.status]),(0,a.jsx)("div",{className:"page page_product-details",children:(0,a.jsx)("div",{className:"container_page",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{children:t.name[e]}),o?(0,a.jsxs)("div",{className:"details__block",children:[(0,a.jsx)("div",{className:"details__splider",children:(0,a.jsx)(x,{})}),(0,a.jsx)("div",{className:"details__descr-order",children:(0,a.jsx)(k,{})})]}):(0,a.jsx)(i.Z,{})]})})})}))},1043:(e,s,t)=>{"use strict";t.d(s,{Gr:()=>i,KT:()=>n,LX:()=>l});var a=t(9590),r=t(7820);const n=e=>({type:a.EH.SET_LOAD_DATA_STATUS_PRODUCT,payload:e}),i=e=>({type:a.EH.SET_DATA_PRODUCT,payload:e}),l=e=>async function(s){s(n({status:"loading",message:`Loading product ${e}`}));try{new Promise(((s,t)=>{setTimeout((()=>{const a=r.Z.find((s=>s.id===e));a?(console.log(`product ${e} loaded`),s(a)):t({mesasage:`product ${e} not found`})}),1e3)})).then((t=>{s(i(t)),s(n({status:"success",message:`Product id=${e} loaded`}))})).catch((t=>{s(n({status:"error",message:`ERROR while loading product id=${e}: ${t}`}))}))}catch(t){s(n({status:"error",message:`ERROR while loading product id=${e}: ${t}`}))}}},6104:e=>{var s="undefined"!=typeof process&&process.pid?process.pid.toString(36):"";function t(){var e=Date.now(),s=t.last||e;return t.last=e>s?e:s+1}e.exports=e.exports.default=function(e,a){return(e||"")+""+s+t().toString(36)+(a||"")},e.exports.process=function(e,a){return(e||"")+s+t().toString(36)+(a||"")},e.exports.time=function(e,s){return(e||"")+t().toString(36)+(s||"")}}}]);