"use strict";(globalThis.webpackChunk_3dprint=globalThis.webpackChunk_3dprint||[]).push([[761],{7123:(e,s,a)=>{a.d(s,{Z:()=>i});var t=a(5893),n=a(7294),r=a(8840);const i=({src:e,alt:s,id:a})=>{const[i,l]=(0,n.useState)(!1),c=(0,n.useRef)(null);return(0,t.jsxs)(t.Fragment,{children:[i||(0,t.jsx)(r.Z,{}),(0,t.jsx)("img",{ref:c,src:e,alt:s,onLoad:()=>{l(!0)},style:{display:i?"block":"none"},id:a})]})}},1611:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(5893),n=a(7294);const r=({idInstance:e,onChange:s,initialAmount:a,lang:r,reset:i})=>{const[l,c]=(0,n.useState)(a),o=a=>{const t=a>=0?a:0;c(t),s(e,t)};return(0,n.useEffect)((()=>{i&&(c(i.amount),s(e,i.amount))}),[i]),(0,t.jsxs)("div",{className:"amount__changer",children:[(0,t.jsx)("button",{className:l<=1?"disabled":"","aria-label":"Decrease amount",onClick:e=>{e.preventDefault(),l>1&&o(l>2?l-1:1)},children:"–"}),(0,t.jsx)("input",{onBlur:a=>(a=>{const t=a>0?a:1;c(t),s(e,t)})(Number(a.target.value)),type:"text",value:l,onChange:e=>{e.preventDefault(),o(Number(e.target.value))},"aria-label":"en"===r?"Enter amount":"Введите количество"}),(0,t.jsx)("button",{"aria-label":"Increase amount",onClick:e=>{e.preventDefault(),o(l+1)},children:"+"})]})}},4378:(e,s,a)=>{a.d(s,{Z:()=>i});var t=a(5893),n=a(7294),r=a(8840);const i=({props:e})=>{const[s,a]=(0,n.useState)(!1),i=(0,n.useRef)(null),l=()=>{a(!0)};return(0,n.useEffect)((()=>{const s=new Image;return s.src=e.path,i.current?.appendChild(s),s.addEventListener("load",l),a(!1),()=>{s.removeEventListener("load",l),i.current?.removeChild(s)}}),[e.path]),(0,t.jsxs)("div",{className:"message_image__container",children:[(0,t.jsx)("div",{className:"img__wrapper",ref:i,children:!s&&(0,t.jsx)(r.Z,{})}),(0,t.jsx)("div",{className:"descr__container",children:(0,t.jsx)("span",{children:e.descr})})]})}},7703:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(5893),n=a(7294);const r=({status:e,header:s,text:a,buttonText:r,buttonAction:i})=>((0,n.useEffect)((()=>{}),[]),(0,t.jsxs)("div",{className:`message_info__container ${e}`,children:[(0,t.jsx)("h3",{children:s}),(0,t.jsx)("div",{className:"text-block",children:a.map(((e,s)=>(0,t.jsx)("p",{children:e},s)))}),(0,t.jsx)("button",{onClick:i,children:r})]}))},4915:(e,s,a)=>{a.d(s,{Z:()=>i});var t=a(5893),n=a(3935),r=a(7294);const i=({visible:e,escExit:s,close:a,children:i})=>{const l=document.getElementById("modal"),c=e=>{s&&27===e.keyCode&&a()};return(0,r.useEffect)((()=>(document.addEventListener("keyup",c),()=>{document.removeEventListener("keyup",c)})),[]),l?(0,n.createPortal)((0,t.jsxs)("div",{className:e?"modal-window visible":"modal-window",children:[(0,t.jsx)("button",{className:"closer","aria-label":"close | закрыть",onClick:a,children:(0,t.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",stroke:"#979797",clipRule:"evenodd",d:"M16 31C24.2843 31 31 24.2843 31 16C31 7.71573 24.2843 1 16 1C7.71573 1 1 7.71573 1 16C1 24.2843 7.71573 31 16 31Z",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M9 9L24 24",strokeWidth:"2",strokeLinecap:"square"}),(0,t.jsx)("path",{d:"M8.49512 23.4586L24.5049 9.54144",strokeWidth:"2",strokeLinecap:"square"})]})}),(0,t.jsx)("div",{className:"content",children:e?i:null})]}),l):(0,t.jsx)("div",{className:"modal-window_absence",children:"Node for Modal Windows was not found"})}},7826:(e,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(5893),n=a(4791),r=a(6113),i=a(7294),l=a(4915),c=a(7703),o=a(9590);const d=e=>({type:o.Dr.SET_SEND_DATA_STATUS_ORDER,payload:e});var u=a(5707),m=a(2886),h=a(3419),p=a(9655);const g=({remove:e,idInstance:s,lang:a})=>{const[n,r]=(0,i.useState)(!1);return(0,t.jsxs)("div",{className:"button_delete__container",onClick:()=>{r(!0)},"aria-label":"en"===a?"Delete":"Удалить",children:[(0,t.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:[(0,t.jsx)("path",{d:"M262.7,101.9c0-33.8,12.1-45.9,45.9-45.9h382.8c33.8,0,45.9,12.1,45.9,45.9v23.6h45.9V71.3c0-33.8-27.4-61.3-61.3-61.3H278c-33.8,0-61.3,27.4-61.3,61.3v54.2h45.9V101.9z"}),(0,t.jsx)("path",{d:"M959.4,148.5H40.6c-16.9,0-30.6,10.3-30.6,23s13.7,23,30.6,23h918.8c16.9,0,30.6-10.3,30.6-23S976.3,148.5,959.4,148.5z"})]}),(0,t.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:[(0,t.jsx)("path",{d:"M728.7,913.4c0,16.9-13.7,30.6-30.6,30.6H300c-16.9,0-30.6-13.7-30.6-30.6L192.8,239h-45.9l76.6,720.3c0,16.9,13.7,30.6,30.6,30.6h490c16.9,0,30.6-13.7,30.6-30.6L851.2,239h-45.9L728.7,913.4z"}),(0,t.jsx)("path",{d:"M366,882.8c12.7,0,23-13.7,23-30.6L343,300.9c0-16.9-10.3-30.6-23-30.6s-23,13.7-23,30.6L343,852.2C343,869.1,353.3,882.8,366,882.8z"}),(0,t.jsx)("path",{d:"M524.9,852.2V300.9c0-16.9-10.3-30.6-23-30.6c-12.7,0-23,13.7-23,30.6v551.3c0,16.9,10.3,30.6,23,30.6C514.6,882.8,524.9,869.1,524.9,852.2z"}),(0,t.jsx)("path",{d:"M660.8,852.2l45.9-551.3c0-16.9-10.3-30.6-23-30.6s-23,13.7-23,30.6l-45.9,551.3c0,16.9,10.3,30.6,23,30.6S660.8,869.1,660.8,852.2z"})]}),(0,t.jsxs)("div",{className:"confirmation__container "+(n?"active":""),children:[(0,t.jsx)("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),r(!1),e(s)},children:"en"===a?"Delete":"Удалить"}),(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),r(!1)},children:"en"===a?"Cancel":"Отмена"})]})]})};var v=a(1043),x=a(1611);const f=()=>(0,t.jsxs)("div",{className:"preloader_w",children:[(0,t.jsx)("div",{className:"dash dash_1"}),(0,t.jsx)("div",{className:"dash dash_2"}),(0,t.jsx)("div",{className:"dash dash_3"}),(0,t.jsx)("div",{className:"dash dash_4"})]});var j=a(7123),b=a(4378);const _={changeItem:u.zL,saveCart:u.FP,removeItem:u.cl},E={loadColors:h.Uf},N={loadFibers:m.il},w={setProduct:v.Gr,setLoadDataStatusProduct:v.KT},L=(0,r.$j)((e=>({cart:e.cart,lang:e.base.lang,product:e.product,colors:e.colors,fibers:e.fibers})),(e=>({setState:{cart:(0,n.DE)(_,e),colors:(0,n.DE)(E,e),fibers:(0,n.DE)(N,e),product:(0,n.DE)(w,e)}})))((({lang:e,cart:s,colors:a,fibers:n,setState:r})=>{const[c,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)({visible:!1}),[m,h]=(0,i.useState)({descr:"",path:""});(0,i.useEffect)((()=>{"loading"!==s.dataLoading.status&&r.cart.saveCart(s.items)}),[s.items]);const v=e=>{r.cart.removeItem(e)};(0,i.useEffect)((()=>{"success"===a.dataLoading.status&&"success"===n.dataLoading.status&&"success"===s.dataLoading.status&&o(!0)}),[a.dataLoading.status,n.dataLoading.status,s.dataLoading.status]);const _=(e,s)=>{r.cart.changeItem({...e,amount:s})};return(0,t.jsxs)("div",{className:"cart-content",children:[c?s.items.length>0?(0,t.jsx)(t.Fragment,{children:s.items.map(((s,i)=>{const l=n.fibersList.find((e=>e.id===s.fiber))?.short.name[e],c=a.colors.find((e=>e.id===s.color));return(0,t.jsxs)("div",{className:"cart__item",children:[(0,t.jsx)(p.OL,{className:"item__product-link_img",to:`../catalog/${s.product.id}`,onClick:()=>(e=>{r.product.setLoadDataStatusProduct({status:"success",message:""}),r.product.setProduct(e)})(s.product),"aria-label":"en"===e?"Go to product":"Перейти к товару",children:(0,t.jsx)("div",{className:"img__container",children:(0,t.jsx)(j.Z,{src:s.product.imgs[0].url,alt:s.product.imgs[0].name[e]})})}),(0,t.jsxs)("div",{className:"item-descr__container",children:[(0,t.jsx)("div",{className:"item__block",children:(0,t.jsx)("span",{"aria-label":"en"===e?"Go to product page":"Перейти на страницу продукта",children:s.product.name[e]})}),s.type?(0,t.jsxs)("div",{className:"item__block",children:[(0,t.jsxs)("span",{children:["en"===e?"Type":"Модификация",":"]}),(0,t.jsx)("span",{className:"fiber",children:s.type[e]})]}):null,(0,t.jsxs)("div",{className:"item__block",children:[(0,t.jsxs)("span",{children:["en"===e?"Fiber":"Материал",":"]}),(0,t.jsx)("span",{className:"fiber",children:l})]}),(0,t.jsxs)("div",{className:"item__block",children:[(0,t.jsxs)("span",{children:["en"===e?"Color":"Цвет",":"]}),(0,t.jsxs)("div",{className:"colors__container",onClick:s=>((s,a)=>{a&&(s.stopPropagation(),h({descr:a.name[e],path:a.url}),u({visible:!0}))})(s,c),children:[(0,t.jsx)("div",{className:"color__container",children:(0,t.jsx)("img",{src:c?.url,alt:c?.name[e]})}),(0,t.jsxs)("span",{className:"color__name",children:["(",c?.name[e],")"]})]})]})]}),(0,t.jsxs)("div",{className:"item__amount-delete",children:[(0,t.jsx)("div",{className:"delete__container",children:(0,t.jsx)("div",{className:"delete__wrapper",children:(0,t.jsx)(g,{remove:v,idInstance:s,lang:e})})}),(0,t.jsx)("div",{className:"amount__container",children:(0,t.jsx)(x.Z,{idInstance:s,initialAmount:s.amount,lang:e,onChange:_})})]})]},s.id)}))}):(0,t.jsx)("h3",{className:"cart_empty__text",children:"en"===e?"Your cart is empty":"Ваша корзина пуста"}):(0,t.jsx)(f,{}),(0,t.jsx)(l.Z,{visible:d.visible,close:()=>{u({visible:!1})},escExit:!0,children:(0,t.jsx)(b.Z,{props:{path:m.path,descr:m.descr}})})]})})),$=a.p+"assets/images/icon_file_question..svg",y=(0,i.forwardRef)((({lang:e,saveFiles:s},a)=>{(0,i.useImperativeHandle)(a,(()=>({clearAttachedFiles(){d([])}})));const n=(0,i.useRef)(null),r=(0,i.useRef)(null),l=(0,i.useRef)(null);let c=0;const[o,d]=(0,i.useState)([]),u=e=>{e.preventDefault(),e.stopPropagation()},m=e=>{u(e),c++,n.current?.classList.add("active")},h=e=>{u(e),n.current?.classList.add("active")},p=e=>{u(e),c--,0===c&&n.current?.classList.remove("active")},v=e=>{u(e),n.current?.classList.remove("active"),d((s=>[...s,...e.dataTransfer?.files]))};return(0,i.useEffect)((()=>{if(n.current)return n.current.addEventListener("dragenter",m,!1),n.current.addEventListener("dragover",h,!1),n.current.addEventListener("dragleave",p,!1),n.current.addEventListener("drop",v,!1),()=>{n.current?.removeEventListener("dragenter",m,!1),n.current?.removeEventListener("dragover",h,!1),n.current?.removeEventListener("dragleave",p,!1),n.current?.removeEventListener("drop",v,!1)}})),(0,i.useEffect)((()=>{(e=>{l.current.innerHTML="";const s=["jpg","jpeg","bmp","svg","png","tiff","webp"];e.reduce((async(e,a)=>(await e,new Promise((t=>{e.then((()=>{const e=new FileReader;e.readAsDataURL(a),e.onloadend=()=>{let n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("span"),c=document.createElement("img");c.src=s.includes(a.name.split(".").pop()||"")?e.result:$,i.innerText=a.name,l.current?.appendChild(n),r.appendChild(c),n.appendChild(r),n.appendChild(i),t(`File ${a.name} added`)}}))})))),Promise.resolve("Files array is empty"))})(o),s(o)}),[o]),(0,t.jsxs)("div",{className:"drop-area",ref:n,children:[(0,t.jsx)("svg",{width:"16",height:"25",viewBox:"0 0 16 25",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M7.31719 23.7322C7.71856 24.1116 8.35148 24.0937 8.73084 23.6924L14.9129 17.1516C15.2923 16.7502 15.2745 16.1173 14.8731 15.7379C14.4717 15.3586 13.8388 15.3764 13.4594 15.7778L7.96424 21.5918L2.15022 16.0966C1.74885 15.7172 1.11593 15.7351 0.73657 16.1365C0.357206 16.5378 0.375048 17.1707 0.776422 17.5501L7.31719 23.7322ZM6.36655 0.404461L7.00449 23.0336L9.00369 22.9773L8.36576 0.348102L6.36655 0.404461Z"})}),(0,t.jsxs)("div",{className:"link__container",children:[(0,t.jsx)("label",{htmlFor:"files",children:"en"===e?"Add files":"Выберите файлы"}),(0,t.jsx)("span",{children:"en"===e?" or drag it here":"для добавления или перетащите их сюда"})]}),(0,t.jsx)("input",{id:"files",type:"file",multiple:!0,onChange:()=>{n.current?.classList.remove("active"),d((e=>[...e,...r.current?.files]))},ref:r}),(0,t.jsx)("div",{className:"preview-gallery",ref:l}),(0,t.jsx)("div",{className:"clear-files",children:(0,t.jsx)(g,{remove:e=>{d([])},idInstance:"cartCleaner",lang:e})})]})})),D={setName:e=>({type:o.Dr.SET_ORDER_NAME,payload:e}),setEmail:e=>({type:o.Dr.SET_ORDER_EMAIL,payload:e}),setPhone:e=>({type:o.Dr.SET_ORDER_PHONE,payload:e}),setMessage:e=>({type:o.Dr.SET_ORDER_MESSAGE,payload:e}),clearFiles:()=>({type:o.Dr.CLEAR_ORDER_FILES}),clearForm:()=>({type:o.Dr.CLEAR_ORDER_FORM}),addFiles:e=>({type:o.Dr.ADD_ORDER_FILES,payload:e}),sendOrder:({lang:e,text:s,filesArr:a,cart:t,informer:n})=>async function(t){t(d({status:"sending",message:"Sending message"})),await fetch("https://api.telegram.org/bot6231173548:AAGzgUoO-zHTG2bzAFPOp8KZxd9Iv9ddH3o/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:"-1001849476847",text:s})}).then((s=>{s.ok||t(d({status:"error",message:"en"===e?`Error while sending a message. HTTP error, status: ${s.status}. Try again later.`:`Ошибка http при отправке сообщения, статус: ${s.status}. Пожалуйста, попробуйте позже.`}))})).then((e=>{})).catch((s=>{t(d({status:"error",message:"en"===e?`Error while sending a message: ${s.message}. Please try again later.`:`Ошибка при отправке сообщения: ${s.message}. Пожалуйста, попробуйте позже.`}))})),a.reduce((async(s,r,i)=>{await s;const l={en:"Files to send left: "+(a.length-i),ru:"Осталось отправить файлов: "+(a.length-i)};return n(l),new Promise((async(s,a)=>{const n=Date.now(),i=new FormData;i.append("chat_id","-1001849476847"),i.append("document",r,r.name);const l={method:"POST",body:i};await fetch("https://api.telegram.org/bot6231173548:AAGzgUoO-zHTG2bzAFPOp8KZxd9Iv9ddH3o/sendDocument",l).then((s=>{s.ok||(t(d({status:"error",message:"en"===e?`Error while sending files. HTTP error, status: ${s.status}. Try again later.`:`Ошибка http при отправке файлов, статус: ${s.status}. Пожалуйста, попробуйте позже.`})),a("en"===e?`Error while sending file "${r.name}": ${s.status}. Sending files has been aborted.`:`Error при отправке файла "${r.name}": ${s.status}. Отправка файлов прервана.`))})).then((e=>{const a=Date.now()-n;setTimeout((()=>{s(`File ${r.name} has been sent successfully`)}),1e3-a)})).catch((s=>{t(d({status:"error",message:"en"===e?`Your message has been sent succesfully, but the error has been occured while sending a file:, ${r.name}, error: ${s.message}`:`Ваше сообщение было успешно отправлено, но возникла ошибка при отправке файла: ${r.name}, ошибка: ${s.message}`})),a("en"===e?`Error while sending file "${r.name}": ${s.message}. Sending files has been aborted.`:`Error при отправке файла "${r.name}": ${s.message}. Отправка файлов прервана.`)}))}))}),Promise.resolve("Files sending started")).then((s=>{t(d({status:"success",message:"en"===e?`Your message ${a.length>0?"and files have":"has"} been sent`:"Ваше сообщение "+(a.length>0?"и вложения были успешно отправлены":"было успешно отправлено")}))})).catch((s=>{t(d({status:"error",message:"en"===e?`The error occur while saving files: ${s}`:`Возникла ошибка при отправке файлов: ${s}`}))}))},setSendDataStatus:d},S={loadColors:h.Uf},C={loadFibers:m.il},k={clearCart:u.LL},R=(0,r.$j)((e=>({lang:e.base.lang,order:e.order,cart:e.cart,colors:e.colors,fibers:e.fibers})),(e=>({setState:{order:(0,n.DE)(D,e),colors:(0,n.DE)(S,e),fibers:(0,n.DE)(C,e),cart:(0,n.DE)(k,e)}})))((({lang:e,order:s,cart:a,colors:n,fibers:r,setState:o})=>{const d=(0,i.useRef)(null),u=(0,i.useRef)(null),m=(0,i.useRef)(null),h=(0,i.useRef)(null),[p,g]=(0,i.useState)({visible:!1}),v=(0,i.useRef)(null),[x,f]=(0,i.useState)({status:"",header:"",text:[]}),j=()=>{g({visible:!1}),"success"===s.dataSending.status&&(o.order.clearFiles(),o.order.clearForm(),v.current?.clearAttachedFiles(),o.cart.clearCart()),o.order.setSendDataStatus({status:"idle",message:""})},b=s=>{f({status:"",header:"en"===e?"Sending order...":"Отправка заказа...",text:[s[e]]}),g({visible:!0})};(0,i.useEffect)((()=>{"success"!==s.dataSending.status&&"error"!==s.dataSending.status||(f({status:s.dataSending.status,header:"success"===s.dataSending.status?"en"===e?"Success":"Отправлено":"en"===e?"Error":"Ошибка",text:[s.dataSending.message]}),g({visible:!0}))}),[s.dataSending.status]);const _=({e,target:s})=>{"Enter"===e.key&&(e.preventDefault(),s?.focus())},E=e=>{switch(e.target.id){case"name":o.order.setName(e.target.value);break;case"phone":o.order.setPhone(e.target.value);break;case"email":o.order.setEmail(e.target.value);break;case"message":o.order.setMessage(e.target.value)}(e=>{e.target.parentElement?.classList.remove("error")})(e)};return(0,t.jsxs)("div",{className:"page_order",children:[(0,t.jsx)("div",{className:"container_page",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"page_order",children:[(0,t.jsx)("h1",{children:"en"===e?"Order 3D printing":"Заказать 3D печать"}),(0,t.jsx)("div",{className:"order__block",children:(0,t.jsxs)("form",{className:"order__container",children:[(0,t.jsx)("h2",{children:"en"===e?"Make an order":"Отправить заявку"}),(0,t.jsxs)("div",{className:"data-block",children:[(0,t.jsxs)("div",{className:"inputs-block",children:[(0,t.jsxs)("div",{className:"input-block",children:[(0,t.jsx)("label",{htmlFor:"name",children:"en"===e?"Your name*":"Ваше имя*"}),(0,t.jsx)("input",{className:"input-element",id:"name",type:"text",required:!0,min:2,max:25,ref:d,value:s.name,onChange:E,onKeyDown:e=>_({e,target:m.current})})]}),(0,t.jsxs)("div",{className:"input-block",children:[(0,t.jsx)("label",{htmlFor:"phone",children:"en"===e?"Your phone":"Ваш телефон"}),(0,t.jsx)("input",{className:"input-element",id:"phone",type:"tel",min:6,max:25,ref:m,value:s.phone,onChange:E,onKeyDown:e=>_({e,target:u.current})})]}),(0,t.jsxs)("div",{className:"input-block",children:[(0,t.jsx)("label",{htmlFor:"email",children:"en"===e?"Your email*":"Ваше почта*"}),(0,t.jsx)("input",{className:"input-element",id:"email",type:"email",required:!0,value:s.email,ref:u,onChange:E,onKeyDown:e=>_({e,target:h.current})})]}),(0,t.jsxs)("div",{className:"input-block message-block",children:[(0,t.jsx)("label",{htmlFor:"message",children:"en"===e?"Information about the order (at least 10 symbols)*":"Информация о заказе (минимум 10 символов)*"}),(0,t.jsx)("textarea",{className:"input-element",id:"message",required:!0,minLength:10,maxLength:1e3,ref:h,value:s.message,onChange:E})]})]}),(0,t.jsx)("div",{className:"files-block",children:(0,t.jsxs)("div",{className:"input-block files",children:[(0,t.jsx)("label",{htmlFor:"files",children:"en"===e?"Attach files":"Прикрепить файлы"}),(0,t.jsx)(y,{saveFiles:e=>{o.order.clearFiles(),o.order.addFiles(e)},lang:e,ref:v})]})})]}),(0,t.jsxs)("div",{className:"cart-content__container",children:[(0,t.jsx)("h3",{children:"en"===e?"Your cart":"Ваша корзина"}),(0,t.jsx)(L,{})]}),(0,t.jsx)("button",{type:"submit",disabled:"success"!==a.dataLoading.status&&"success"!==r.dataLoading.status&&"success"!==n.dataLoading.status&&"sending"!==s.dataSending.status,className:"button_order",onClick:t=>{(e=>{e.preventDefault(),e.stopPropagation()})(t);const i=new Date,l=s.name,c=s.phone,p=s.email,v=s.message;if((()=>{const s=[{ref:d,name:{en:"Your name",ru:"Ваше имя"}},{ref:u,name:{en:"Your email",ru:"Ваша почта"}},{ref:m,name:{en:"Your phone",ru:"Ваш телефон"}},{ref:h,name:{en:"Information about the order",ru:"Информация о заказе"}}];let a=!1;return f((s=>({status:"error",header:"en"===e?"Errors found":"Обнаружены ошибки",text:[]}))),s.forEach((s=>{s.ref.current?.checkValidity()||(f((a=>({...a,text:a.text.concat("en"===e?`Field "${s.name[e]}" is incorrect`:`Поле "${s.name[e]}" заполнено неверно`)}))),s.ref.current?.parentElement?.classList.add("error"),a=!0)})),a})())return void g({visible:!0});const x=a.items.reduce(((s,a,t)=>s+`${t+1}) ${a.product.name[e]}\n${"en"===e?"Options":"Версия"}: ${a.type} \n${"en"===e?"Fiber":"Материал"}: ${r.fibersList.find((e=>e.id===a.fiber))?.short.name[e]}\n${"en"===e?"Color":"Цвет"}: ${n.colors.find((e=>e.id===a.color))?.name[e]}\n${"en"===e?"Amount":"Количество"}: ${a.amount}\n\n`),""),j=`\n${"en"===e?"Date":"Дата"}: ${i.toISOString().slice(0,10)}\n${"en"===e?"Time":"Время"}: ${i.toISOString().slice(11,19)}\n${"en"===e?"Name":"Имя"}: ${l}\n${"en"===e?"Email":"Почта"}: ${p}\n${"en"===e?"Phone":"Телефон"}: ${c}\n${"en"===e?"Message":"Сообщение"}: ${v}`,_=`${"en"===e?"New order":"Новый заказ"}:${j}\n\n\n ${"en"===e?"Cart content":"Содержимое корзины"}: \n${x}${s.files.length>0?"en"===e?"\n\n\nAttached files:":"\n\n\nПрикрепленные файлы:":""}`;o.order.sendOrder({lang:e,text:_,filesArr:s.files,cart:a,informer:b})},children:"en"===e?"Order":"Отправить"})]})})]})})}),(0,t.jsx)(l.Z,{visible:p.visible,close:j,escExit:!0,children:(0,t.jsx)(c.Z,{status:x.status,header:x.header,text:x.text,buttonText:"en"===e?"Close":"Закрыть",buttonAction:j})})]})}))},1043:(e,s,a)=>{a.d(s,{Gr:()=>i,KT:()=>r,LX:()=>l});var t=a(9590),n=a(7820);const r=e=>({type:t.EH.SET_LOAD_DATA_STATUS_PRODUCT,payload:e}),i=e=>({type:t.EH.SET_DATA_PRODUCT,payload:e}),l=e=>async function(s){s(r({status:"loading",message:`Loading product ${e}`}));try{new Promise(((s,a)=>{setTimeout((()=>{const t=n.Z.find((s=>s.id===e));t?(console.log(`product ${e} loaded`),s(t)):a({mesasage:`product ${e} not found`})}),1e3)})).then((a=>{s(i(a)),s(r({status:"success",message:`Product id=${e} loaded`}))})).catch((a=>{s(r({status:"error",message:`ERROR while loading product id=${e}: ${a}`}))}))}catch(a){s(r({status:"error",message:`ERROR while loading product id=${e}: ${a}`}))}}}}]);