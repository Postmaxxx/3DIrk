"use strict";(globalThis.webpackChunk_3dprint=globalThis.webpackChunk_3dprint||[]).push([[175],{2653:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(390),n=a(2024),r=a(2559);const l=e=>{let{src:s,alt:a,id:l}=e;const[i,d]=(0,t.useState)(!1),o=(0,t.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[i||(0,r.jsx)(n.Z,{}),(0,r.jsx)("img",{ref:o,src:s,alt:a,onLoad:()=>{d(!0)},style:{display:i?"block":"none"},id:l})]})}},3646:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(390),n=a(2559);const r=e=>{let{idInstance:s,onChange:a,initialAmount:r,lang:l,reset:i}=e;const[d,o]=(0,t.useState)(r),c=e=>{const t=e>=0?e:0;o(t),a(s,t)};return(0,t.useEffect)((()=>{i&&(o(i.amount),a(s,i.amount))}),[i]),(0,n.jsxs)("div",{className:"amount__changer",children:[(0,n.jsx)("button",{className:d<=1?"disabled":"","aria-label":"Decrease amount",onClick:e=>{e.preventDefault(),d>1&&c(d>2?d-1:1)},children:"\u2013"}),(0,n.jsx)("input",{onBlur:e=>(e=>{const t=e>0?e:1;o(t),a(s,t)})(Number(e.target.value)),type:"text",value:d,onChange:e=>{e.preventDefault(),c(Number(e.target.value))},"aria-label":"en"===l?"Enter amount":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,n.jsx)("button",{"aria-label":"Increase amount",onClick:e=>{e.preventDefault(),c(d+1)},children:"+"})]})}},5484:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(390),n=a(2024),r=a(2559);const l=e=>{let{props:s}=e;const[a,l]=(0,t.useState)(!1),i=(0,t.useRef)(null),d=()=>{l(!0)};return(0,t.useEffect)((()=>{var e;const a=new Image;return a.src=s.path,null===(e=i.current)||void 0===e||e.appendChild(a),a.addEventListener("load",d),l(!1),()=>{var e;a.removeEventListener("load",d),null===(e=i.current)||void 0===e||e.removeChild(a)}}),[s.path]),(0,r.jsxs)("div",{className:"message_image__container",children:[(0,r.jsx)("div",{className:"img__wrapper",ref:i,children:!a&&(0,r.jsx)(n.Z,{})}),(0,r.jsx)("div",{className:"descr__container",children:(0,r.jsx)("span",{children:s.descr})})]})}},3875:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(390),n=a(2559);const r=e=>{let{status:s,header:a,text:r,buttonText:l,buttonAction:i}=e;return(0,t.useEffect)((()=>{}),[]),(0,n.jsxs)("div",{className:`message_info__container ${s}`,children:[(0,n.jsx)("h3",{children:a}),(0,n.jsx)("div",{className:"text-block",children:r.map(((e,s)=>(0,n.jsx)("p",{children:e},s)))}),(0,n.jsx)("button",{onClick:i,children:l})]})}},2508:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(6599),n=a(390),r=a(2559);const l=e=>{let{visible:s,escExit:a,close:l,children:i}=e;const d=document.getElementById("modal"),o=e=>{a&&27===e.keyCode&&l()};return(0,n.useEffect)((()=>(document.addEventListener("keyup",o),()=>{document.removeEventListener("keyup",o)})),[]),d?(0,t.createPortal)((0,r.jsxs)("div",{className:s?"modal-window visible":"modal-window",children:[(0,r.jsx)("button",{className:"closer","aria-label":"close | \u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:l,children:(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",stroke:"#979797",clipRule:"evenodd",d:"M16 31C24.2843 31 31 24.2843 31 16C31 7.71573 24.2843 1 16 1C7.71573 1 1 7.71573 1 16C1 24.2843 7.71573 31 16 31Z",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M9 9L24 24",strokeWidth:"2",strokeLinecap:"square"}),(0,r.jsx)("path",{d:"M8.49512 23.4586L24.5049 9.54144",strokeWidth:"2",strokeLinecap:"square"})]})}),(0,r.jsx)("div",{className:"content",children:s?i:null})]}),d):(0,r.jsx)("div",{className:"modal-window_absence",children:"Node for Modal Windows was not found"})}},175:(e,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(5902),n=a(5040),r=a(390),l=a(2508),i=a(3875),d=a(7526);const o=e=>({type:d.Dr.SET_SEND_DATA_STATUS_ORDER,payload:e});var c=a(8205),u=a(7767),m=a(2722),h=a(5400),v=a(2559);const p=e=>{let{remove:s,idInstance:a,lang:t}=e;const[n,l]=(0,r.useState)(!1);return(0,v.jsxs)("div",{className:"button_delete__container",onClick:()=>{l(!0)},"aria-label":"en"===t?"Delete":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:[(0,v.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:[(0,v.jsx)("path",{d:"M262.7,101.9c0-33.8,12.1-45.9,45.9-45.9h382.8c33.8,0,45.9,12.1,45.9,45.9v23.6h45.9V71.3c0-33.8-27.4-61.3-61.3-61.3H278c-33.8,0-61.3,27.4-61.3,61.3v54.2h45.9V101.9z"}),(0,v.jsx)("path",{d:"M959.4,148.5H40.6c-16.9,0-30.6,10.3-30.6,23s13.7,23,30.6,23h918.8c16.9,0,30.6-10.3,30.6-23S976.3,148.5,959.4,148.5z"})]}),(0,v.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",children:[(0,v.jsx)("path",{d:"M728.7,913.4c0,16.9-13.7,30.6-30.6,30.6H300c-16.9,0-30.6-13.7-30.6-30.6L192.8,239h-45.9l76.6,720.3c0,16.9,13.7,30.6,30.6,30.6h490c16.9,0,30.6-13.7,30.6-30.6L851.2,239h-45.9L728.7,913.4z"}),(0,v.jsx)("path",{d:"M366,882.8c12.7,0,23-13.7,23-30.6L343,300.9c0-16.9-10.3-30.6-23-30.6s-23,13.7-23,30.6L343,852.2C343,869.1,353.3,882.8,366,882.8z"}),(0,v.jsx)("path",{d:"M524.9,852.2V300.9c0-16.9-10.3-30.6-23-30.6c-12.7,0-23,13.7-23,30.6v551.3c0,16.9,10.3,30.6,23,30.6C514.6,882.8,524.9,869.1,524.9,852.2z"}),(0,v.jsx)("path",{d:"M660.8,852.2l45.9-551.3c0-16.9-10.3-30.6-23-30.6s-23,13.7-23,30.6l-45.9,551.3c0,16.9,10.3,30.6,23,30.6S660.8,869.1,660.8,852.2z"})]}),(0,v.jsxs)("div",{className:"confirmation__container "+(n?"active":""),children:[(0,v.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),l(!1),s(a)},children:"en"===t?"Delete":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,v.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),l(!1)},children:"en"===t?"Cancel":"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})};var g=a(4071),x=a(3646);const f=()=>(0,v.jsxs)("div",{className:"preloader_w",children:[(0,v.jsx)("div",{className:"dash dash_1"}),(0,v.jsx)("div",{className:"dash dash_2"}),(0,v.jsx)("div",{className:"dash dash_3"}),(0,v.jsx)("div",{className:"dash dash_4"})]});var j=a(2653),b=a(5484);const _={changeItem:c.zL,saveCart:c.FP,removeItem:c.cl},E={loadColors:m.Uf},N={loadFibers:u.il},w={setProduct:g.Gr,setLoadDataStatusProduct:g.KT},L=(0,n.$j)((e=>({cart:e.cart,lang:e.base.lang,product:e.product,colors:e.colors,fibers:e.fibers})),(e=>({setState:{cart:(0,t.DE)(_,e),colors:(0,t.DE)(E,e),fibers:(0,t.DE)(N,e),product:(0,t.DE)(w,e)}})))((e=>{let{lang:s,cart:a,colors:t,fibers:n,setState:i}=e;const[d,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)({visible:!1}),[m,g]=(0,r.useState)({descr:"",path:""});(0,r.useEffect)((()=>{"loading"!==a.dataLoading.status&&i.cart.saveCart(a.items)}),[a.items]);const _=e=>{i.cart.removeItem(e)};(0,r.useEffect)((()=>{"success"===t.dataLoading.status&&"success"===n.dataLoading.status&&"success"===a.dataLoading.status&&o(!0)}),[t.dataLoading.status,n.dataLoading.status,a.dataLoading.status]);const E=(e,s)=>{i.cart.changeItem({...e,amount:s})};return(0,v.jsxs)("div",{className:"cart-content",children:[d?a.items.length>0?(0,v.jsx)(v.Fragment,{children:a.items.map(((e,a)=>{var r;const l=null===(r=n.fibersList.find((s=>s.id===e.fiber)))||void 0===r?void 0:r.short.name[s],d=t.colors.find((s=>s.id===e.color));return(0,v.jsxs)("div",{className:"cart__item",children:[(0,v.jsx)(h.OL,{className:"item__product-link_img",to:`../catalog/${e.product.id}`,onClick:()=>(e=>{i.product.setLoadDataStatusProduct({status:"success",message:""}),i.product.setProduct(e)})(e.product),"aria-label":"en"===s?"Go to product":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0442\u043e\u0432\u0430\u0440\u0443",children:(0,v.jsx)("div",{className:"img__container",children:(0,v.jsx)(j.Z,{src:e.product.imgs[0].url,alt:e.product.imgs[0].name[s]})})}),(0,v.jsxs)("div",{className:"item-descr__container",children:[(0,v.jsx)("div",{className:"item__block",children:(0,v.jsx)("span",{"aria-label":"en"===s?"Go to product page":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430",children:e.product.name[s]})}),e.type?(0,v.jsxs)("div",{className:"item__block",children:[(0,v.jsxs)("span",{children:["en"===s?"Type":"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",":"]}),(0,v.jsx)("span",{className:"fiber",children:e.type[s]})]}):null,(0,v.jsxs)("div",{className:"item__block",children:[(0,v.jsxs)("span",{children:["en"===s?"Fiber":"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",":"]}),(0,v.jsx)("span",{className:"fiber",children:l})]}),(0,v.jsxs)("div",{className:"item__block",children:[(0,v.jsxs)("span",{children:["en"===s?"Color":"\u0426\u0432\u0435\u0442",":"]}),(0,v.jsxs)("div",{className:"colors__container",onClick:e=>((e,a)=>{a&&(e.stopPropagation(),g({descr:a.name[s],path:a.url}),u({visible:!0}))})(e,d),children:[(0,v.jsx)("div",{className:"color__container",children:(0,v.jsx)("img",{src:null===d||void 0===d?void 0:d.url,alt:null===d||void 0===d?void 0:d.name[s]})}),(0,v.jsxs)("span",{className:"color__name",children:["(",null===d||void 0===d?void 0:d.name[s],")"]})]})]})]}),(0,v.jsxs)("div",{className:"item__amount-delete",children:[(0,v.jsx)("div",{className:"delete__container",children:(0,v.jsx)("div",{className:"delete__wrapper",children:(0,v.jsx)(p,{remove:_,idInstance:e,lang:s})})}),(0,v.jsx)("div",{className:"amount__container",children:(0,v.jsx)(x.Z,{idInstance:e,initialAmount:e.amount,lang:s,onChange:E})})]})]},e.id)}))}):(0,v.jsx)("h3",{className:"cart_empty__text",children:"en"===s?"Your cart is empty":"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}):(0,v.jsx)(f,{}),(0,v.jsx)(l.Z,{visible:c.visible,close:()=>{u({visible:!1})},escExit:!0,children:(0,v.jsx)(b.Z,{props:{path:m.path,descr:m.descr}})})]})}));const $=a.p+"static/media/icon_file_question.62eabd8e5dc7cba97ab78672ece533e8.svg",y=(0,r.forwardRef)(((e,s)=>{let{lang:a,saveFiles:t}=e;(0,r.useImperativeHandle)(s,(()=>({clearAttachedFiles(){c([])}})));const n=(0,r.useRef)(null),l=(0,r.useRef)(null),i=(0,r.useRef)(null);let d=0;const[o,c]=(0,r.useState)([]),u=e=>{e.preventDefault(),e.stopPropagation()},m=e=>{var s;u(e),d++,null===(s=n.current)||void 0===s||s.classList.add("active")},h=e=>{var s;u(e),null===(s=n.current)||void 0===s||s.classList.add("active")},g=e=>{var s;(u(e),d--,0===d)&&(null===(s=n.current)||void 0===s||s.classList.remove("active"))},x=e=>{var s;u(e),null===(s=n.current)||void 0===s||s.classList.remove("active"),c((s=>{var a;return[...s,...null===(a=e.dataTransfer)||void 0===a?void 0:a.files]}))};(0,r.useEffect)((()=>{if(n.current)return n.current.addEventListener("dragenter",m,!1),n.current.addEventListener("dragover",h,!1),n.current.addEventListener("dragleave",g,!1),n.current.addEventListener("drop",x,!1),()=>{var e,s,a,t;null===(e=n.current)||void 0===e||e.removeEventListener("dragenter",m,!1),null===(s=n.current)||void 0===s||s.removeEventListener("dragover",h,!1),null===(a=n.current)||void 0===a||a.removeEventListener("dragleave",g,!1),null===(t=n.current)||void 0===t||t.removeEventListener("drop",x,!1)}})),(0,r.useEffect)((()=>{(e=>{i.current.innerHTML="";const s=["jpg","jpeg","bmp","svg","png","tiff","webp"];e.reduce((async(e,a)=>(await e,new Promise((t=>{e.then((()=>{const e=new FileReader;e.readAsDataURL(a),e.onloadend=()=>{var n;let r=document.createElement("div"),l=document.createElement("div"),d=document.createElement("span"),o=document.createElement("img");o.src=s.includes(a.name.split(".").pop()||"")?e.result:$,d.innerText=a.name,null===(n=i.current)||void 0===n||n.appendChild(r),l.appendChild(o),r.appendChild(l),r.appendChild(d),t(`File ${a.name} added`)}}))})))),Promise.resolve("Files array is empty"))})(o),t(o)}),[o]);return(0,v.jsxs)("div",{className:"drop-area",ref:n,children:[(0,v.jsx)("svg",{width:"16",height:"25",viewBox:"0 0 16 25",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M7.31719 23.7322C7.71856 24.1116 8.35148 24.0937 8.73084 23.6924L14.9129 17.1516C15.2923 16.7502 15.2745 16.1173 14.8731 15.7379C14.4717 15.3586 13.8388 15.3764 13.4594 15.7778L7.96424 21.5918L2.15022 16.0966C1.74885 15.7172 1.11593 15.7351 0.73657 16.1365C0.357206 16.5378 0.375048 17.1707 0.776422 17.5501L7.31719 23.7322ZM6.36655 0.404461L7.00449 23.0336L9.00369 22.9773L8.36576 0.348102L6.36655 0.404461Z"})}),(0,v.jsxs)("div",{className:"link__container",children:[(0,v.jsx)("label",{htmlFor:"files",children:"en"===a?"Add files":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b"}),(0,v.jsx)("span",{children:"en"===a?" or drag it here":"\u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0441\u044e\u0434\u0430"})]}),(0,v.jsx)("input",{id:"files",type:"file",multiple:!0,onChange:()=>{var e;null===(e=n.current)||void 0===e||e.classList.remove("active"),c((e=>{var s;return[...e,...null===(s=l.current)||void 0===s?void 0:s.files]}))},ref:l}),(0,v.jsx)("div",{className:"preview-gallery",ref:i}),(0,v.jsx)("div",{className:"clear-files",children:(0,v.jsx)(p,{remove:e=>{c([])},idInstance:"cartCleaner",lang:a})})]})})),D={setName:e=>({type:d.Dr.SET_ORDER_NAME,payload:e}),setEmail:e=>({type:d.Dr.SET_ORDER_EMAIL,payload:e}),setPhone:e=>({type:d.Dr.SET_ORDER_PHONE,payload:e}),setMessage:e=>({type:d.Dr.SET_ORDER_MESSAGE,payload:e}),clearFiles:()=>({type:d.Dr.CLEAR_ORDER_FILES}),clearForm:()=>({type:d.Dr.CLEAR_ORDER_FORM}),addFiles:e=>({type:d.Dr.ADD_ORDER_FILES,payload:e}),sendOrder:e=>{let{lang:s,text:a,filesArr:t,cart:n,informer:r}=e;return async function(e){e(o({status:"sending",message:"Sending message"})),await fetch("https://api.telegram.org/bot6231173548:AAGzgUoO-zHTG2bzAFPOp8KZxd9Iv9ddH3o/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:"-1001849476847",text:a})}).then((a=>{a.ok||e(o({status:"error",message:"en"===s?`Error while sending a message. HTTP error, status: ${a.status}. Try again later.`:`\u041e\u0448\u0438\u0431\u043a\u0430 http \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0441\u0442\u0430\u0442\u0443\u0441: ${a.status}. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.`}))})).then((e=>{})).catch((a=>{e(o({status:"error",message:"en"===s?`Error while sending a message: ${a.message}. Please try again later.`:`\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f: ${a.message}. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.`}))})),t.reduce((async(a,n,l)=>{await a;const i={en:"Files to send left: "+(t.length-l),ru:"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b\u043e\u0432: "+(t.length-l)};return r(i),new Promise((async(a,t)=>{const r=Date.now(),l=new FormData;l.append("chat_id","-1001849476847"),l.append("document",n,n.name);const i={method:"POST",body:l};await fetch("https://api.telegram.org/bot6231173548:AAGzgUoO-zHTG2bzAFPOp8KZxd9Iv9ddH3o/sendDocument",i).then((a=>{a.ok||(e(o({status:"error",message:"en"===s?`Error while sending files. HTTP error, status: ${a.status}. Try again later.`:`\u041e\u0448\u0438\u0431\u043a\u0430 http \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u043e\u0432, \u0441\u0442\u0430\u0442\u0443\u0441: ${a.status}. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.`})),t("en"===s?`Error while sending file "${n.name}": ${a.status}. Sending files has been aborted.`:`Error \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 "${n.name}": ${a.status}. \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u0430.`))})).then((e=>{const s=Date.now()-r;setTimeout((()=>{a(`File ${n.name} has been sent successfully`)}),1e3-s)})).catch((a=>{e(o({status:"error",message:"en"===s?`Your message has been sent succesfully, but the error has been occured while sending a file:, ${n.name}, error: ${a.message}`:`\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e, \u043d\u043e \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u0430: ${n.name}, \u043e\u0448\u0438\u0431\u043a\u0430: ${a.message}`})),t("en"===s?`Error while sending file "${n.name}": ${a.message}. Sending files has been aborted.`:`Error \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u0430 "${n.name}": ${a.message}. \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u0430.`)}))}))}),Promise.resolve("Files sending started")).then((a=>{e(o({status:"success",message:"en"===s?`Your message ${t.length>0?"and files have":"has"} been sent`:"\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 "+(t.length>0?"\u0438 \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b":"\u0431\u044b\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e")}))})).catch((a=>{e(o({status:"error",message:"en"===s?`The error occur while saving files: ${a}`:`\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u043e\u0432: ${a}`}))}))}},setSendDataStatus:o},S={loadColors:m.Uf},C={loadFibers:u.il},k={clearCart:c.LL},R=(0,n.$j)((e=>({lang:e.base.lang,order:e.order,cart:e.cart,colors:e.colors,fibers:e.fibers})),(e=>({setState:{order:(0,t.DE)(D,e),colors:(0,t.DE)(S,e),fibers:(0,t.DE)(C,e),cart:(0,t.DE)(k,e)}})))((e=>{let{lang:s,order:a,cart:t,colors:n,fibers:d,setState:o}=e;const c=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null),h=(0,r.useRef)(null),[p,g]=(0,r.useState)({visible:!1}),x=(0,r.useRef)(null),[f,j]=(0,r.useState)({status:"",header:"",text:[]}),b=()=>{var e;(g({visible:!1}),"success"===a.dataSending.status)&&(o.order.clearFiles(),o.order.clearForm(),null===(e=x.current)||void 0===e||e.clearAttachedFiles(),o.cart.clearCart());o.order.setSendDataStatus({status:"idle",message:""})},_=e=>{j({status:"",header:"en"===s?"Sending order...":"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430...",text:[e[s]]}),g({visible:!0})};(0,r.useEffect)((()=>{"success"!==a.dataSending.status&&"error"!==a.dataSending.status||(j({status:a.dataSending.status,header:"success"===a.dataSending.status?"en"===s?"Success":"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"en"===s?"Error":"\u041e\u0448\u0438\u0431\u043a\u0430",text:[a.dataSending.message]}),g({visible:!0}))}),[a.dataSending.status]);const E=e=>{let{e:s,target:a}=e;"Enter"===s.key&&(s.preventDefault(),null===a||void 0===a||a.focus())},N=e=>{switch(e.target.id){case"name":o.order.setName(e.target.value);break;case"phone":o.order.setPhone(e.target.value);break;case"email":o.order.setEmail(e.target.value);break;case"message":o.order.setMessage(e.target.value)}(e=>{var s;null===(s=e.target.parentElement)||void 0===s||s.classList.remove("error")})(e)};return(0,v.jsxs)("div",{className:"page_order",children:[(0,v.jsx)("div",{className:"container_page",children:(0,v.jsx)("div",{className:"container",children:(0,v.jsxs)("div",{className:"page_order",children:[(0,v.jsx)("h1",{children:"en"===s?"Order 3D printing":"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c 3D \u043f\u0435\u0447\u0430\u0442\u044c"}),(0,v.jsx)("div",{className:"order__block",children:(0,v.jsxs)("form",{className:"order__container",children:[(0,v.jsx)("h2",{children:"en"===s?"Make an order":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"}),(0,v.jsxs)("div",{className:"data-block",children:[(0,v.jsxs)("div",{className:"inputs-block",children:[(0,v.jsxs)("div",{className:"input-block",children:[(0,v.jsx)("label",{htmlFor:"name",children:"en"===s?"Your name*":"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f*"}),(0,v.jsx)("input",{className:"input-element",id:"name",type:"text",required:!0,min:2,max:25,ref:c,value:a.name,onChange:N,onKeyDown:e=>E({e:e,target:m.current})})]}),(0,v.jsxs)("div",{className:"input-block",children:[(0,v.jsx)("label",{htmlFor:"phone",children:"en"===s?"Your phone":"\u0412\u0430\u0448 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,v.jsx)("input",{className:"input-element",id:"phone",type:"tel",min:6,max:25,ref:m,value:a.phone,onChange:N,onKeyDown:e=>E({e:e,target:u.current})})]}),(0,v.jsxs)("div",{className:"input-block",children:[(0,v.jsx)("label",{htmlFor:"email",children:"en"===s?"Your email*":"\u0412\u0430\u0448\u0435 \u043f\u043e\u0447\u0442\u0430*"}),(0,v.jsx)("input",{className:"input-element",id:"email",type:"email",required:!0,value:a.email,ref:u,onChange:N,onKeyDown:e=>E({e:e,target:h.current})})]}),(0,v.jsxs)("div",{className:"input-block message-block",children:[(0,v.jsx)("label",{htmlFor:"message",children:"en"===s?"Information about the order (at least 10 symbols)*":"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)*"}),(0,v.jsx)("textarea",{className:"input-element",id:"message",required:!0,minLength:10,maxLength:1e3,ref:h,value:a.message,onChange:N})]})]}),(0,v.jsx)("div",{className:"files-block",children:(0,v.jsxs)("div",{className:"input-block files",children:[(0,v.jsx)("label",{htmlFor:"files",children:"en"===s?"Attach files":"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u0430\u0439\u043b\u044b"}),(0,v.jsx)(y,{saveFiles:e=>{o.order.clearFiles(),o.order.addFiles(e)},lang:s,ref:x})]})})]}),(0,v.jsxs)("div",{className:"cart-content__container",children:[(0,v.jsx)("h3",{children:"en"===s?"Your cart":"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,v.jsx)(L,{})]}),(0,v.jsx)("button",{type:"submit",disabled:"success"!==t.dataLoading.status&&"success"!==d.dataLoading.status&&"success"!==n.dataLoading.status&&"sending"!==a.dataSending.status,className:"button_order",onClick:e=>{(e=>{e.preventDefault(),e.stopPropagation()})(e);const r=new Date,l=a.name,i=a.phone,v=a.email,p=a.message;if((()=>{const e=[{ref:c,name:{en:"Your name",ru:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"}},{ref:u,name:{en:"Your email",ru:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0447\u0442\u0430"}},{ref:m,name:{en:"Your phone",ru:"\u0412\u0430\u0448 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"}},{ref:h,name:{en:"Information about the order",ru:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435"}}];let a=!1;return j((e=>({status:"error",header:"en"===s?"Errors found":"\u041e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u044b \u043e\u0448\u0438\u0431\u043a\u0438",text:[]}))),e.forEach((e=>{var t,n,r;null!==(t=e.ref.current)&&void 0!==t&&t.checkValidity()||(j((a=>({...a,text:a.text.concat("en"===s?`Field "${e.name[s]}" is incorrect`:`\u041f\u043e\u043b\u0435 "${e.name[s]}" \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043d\u0435\u0432\u0435\u0440\u043d\u043e`)}))),null===(n=e.ref.current)||void 0===n||null===(r=n.parentElement)||void 0===r||r.classList.add("error"),a=!0)})),a})())return void g({visible:!0});const x=t.items.reduce(((e,a,t)=>{var r,l;return e+`${t+1}) ${a.product.name[s]}\n${"en"===s?"Options":"\u0412\u0435\u0440\u0441\u0438\u044f"}: ${a.type} \n${"en"===s?"Fiber":"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}: ${null===(r=d.fibersList.find((e=>e.id===a.fiber)))||void 0===r?void 0:r.short.name[s]}\n${"en"===s?"Color":"\u0426\u0432\u0435\u0442"}: ${null===(l=n.colors.find((e=>e.id===a.color)))||void 0===l?void 0:l.name[s]}\n${"en"===s?"Amount":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}: ${a.amount}\n\n`}),""),f=`\n${"en"===s?"Date":"\u0414\u0430\u0442\u0430"}: ${r.toISOString().slice(0,10)}\n${"en"===s?"Time":"\u0412\u0440\u0435\u043c\u044f"}: ${r.toISOString().slice(11,19)}\n${"en"===s?"Name":"\u0418\u043c\u044f"}: ${l}\n${"en"===s?"Email":"\u041f\u043e\u0447\u0442\u0430"}: ${v}\n${"en"===s?"Phone":"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}: ${i}\n${"en"===s?"Message":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}: ${p}`,b=`${"en"===s?"New order":"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"}:${f}\n\n\n ${"en"===s?"Cart content":"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"}: \n${x}${a.files.length>0?"en"===s?"\n\n\nAttached files:":"\n\n\n\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b:":""}`;o.order.sendOrder({lang:s,text:b,filesArr:a.files,cart:t,informer:_})},children:"en"===s?"Order":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})]})})}),(0,v.jsx)(l.Z,{visible:p.visible,close:b,escExit:!0,children:(0,v.jsx)(i.Z,{status:f.status,header:f.header,text:f.text,buttonText:"en"===s?"Close":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",buttonAction:b})})]})}))},4071:(e,s,a)=>{a.d(s,{Gr:()=>l,KT:()=>r,LX:()=>i});var t=a(7526),n=a(6619);const r=e=>({type:t.EH.SET_LOAD_DATA_STATUS_PRODUCT,payload:e}),l=e=>({type:t.EH.SET_DATA_PRODUCT,payload:e}),i=e=>async function(s){s(r({status:"loading",message:`Loading product ${e}`}));try{new Promise(((s,a)=>{setTimeout((()=>{const t=n.Z.find((s=>s.id===e));t?(console.log(`product ${e} loaded`),s(t)):a({mesasage:`product ${e} not found`})}),1e3)})).then((a=>{s(l(a)),s(r({status:"success",message:`Product id=${e} loaded`}))})).catch((a=>{s(r({status:"error",message:`ERROR while loading product id=${e}: ${a}`}))}))}catch(a){s(r({status:"error",message:`ERROR while loading product id=${e}: ${a}`}))}}}}]);
//# sourceMappingURL=175.505ce1bd.chunk.js.map